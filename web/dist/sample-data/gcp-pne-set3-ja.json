{
  "exam": {
    "id": "gcp-pne-set3-ja",
    "name": "Professional Cloud Network Engineer 練習問題 Set 3",
    "code": "PNE",
    "provider": "Google Cloud",
    "language": "ja",
    "description": "Google Cloud Professional Cloud Network Engineer 認定練習問題第3セット",
    "totalQuestions": 40,
    "passingScore": 70,
    "examTime": 120,
    "domains": [
      "クラウドネットワークの設計と計画",
      "VPCネットワークの実装",
      "ネットワークサービスの構成",
      "ハイブリッド相互接続の実装",
      "ネットワーク運用の管理と監視"
    ],
    "tags": ["Google Cloud", "Network", "Professional"]
  },
  "questions": [
    {
      "id": "gcp-pne-set3-ja-q1",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "クラウドネットワークの設計と計画",
      "question": "金融機関向けにネットワークアーキテクチャを設計しています。すべてのデータは転送中に暗号化され、ネットワークトラフィックは公共のインターネットを経由してはいけません。Google Cloudサービスへの接続にはどのソリューションを選択すべきですか？",
      "options": {
        "A": "パブリックIPとHTTPSを使用してサービスにアクセスする",
        "B": "Private Service ConnectとCloud Interconnectを組み合わせて使用する",
        "C": "VPNを構成し、VPN経由でパブリックAPIにアクセスする",
        "D": "プロキシサーバーを使用してすべてのリクエストを転送する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Private Service Connectを使用すると、プライベートエンドポイント経由でGoogle APIとサービスにアクセスでき、トラフィックは完全にGoogle内部ネットワーク内を通過します。Cloud Interconnectと組み合わせることで、オンプレミスからGCPへのトラフィックも公共のインターネットを経由しません。これにより、金融機関のセキュリティコンプライアンス要件を満たすエンドツーエンドのプライベート接続が提供されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q2",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "VPCネットワークの実装",
      "question": "サブネットを構成して、その中のVMインスタンスがGoogle APIにのみアクセスでき、公共のインターネット上の他のリソースにはアクセスできないようにする必要があります。どのように構成すべきですか？",
      "options": {
        "A": "VMに外部IPアドレスを割り当てず、プライベートGoogleアクセスを有効にする",
        "B": "Cloud NATを構成し、googleapis.comへのアクセスのみを許可する",
        "C": "VPCファイアウォールルールですべての送信トラフィックをブロックする",
        "D": "VMを分離されたVPCに配置する"
      },
      "answer": "A",
      "answerType": "single",
      "explanation": "外部IPアドレスが割り当てられていないVMは、公共のインターネットに直接アクセスできません。サブネットでプライベートGoogleアクセスを有効にすると、これらのVMはGoogle APIとサービス（Cloud Storageやbigqueryなど）にアクセスできます。これはNATや追加のネットワークコンポーネントを必要としない、最もシンプルで最も安全な方法です。"
    },
    {
      "id": "gcp-pne-set3-ja-q3",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワークサービスの構成",
      "question": "外部HTTP(S)ロードバランサーを使用したWebアプリケーションがあります。バックエンドサービスがロードバランサーからのトラフィックのみを受け入れ、直接アクセスを受け入れないようにする必要があります。どのように構成すべきですか？",
      "options": {
        "A": "バックエンドVMに外部IPアドレスを割り当てない",
        "B": "ロードバランサーのIP範囲からのトラフィックのみを許可するファイアウォールルールを構成する",
        "C": "Googleヘルスチェックとロードバランサーのソース範囲（130.211.0.0/22と35.191.0.0/16）からのトラフィックのみを許可するファイアウォールルールを構成する",
        "D": "Cloud Armorを使用してロードバランサー以外のトラフィックをブロックする"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "GoogleのHTTP(S)ロードバランサーは、バックエンドとの通信に特定のソースIP範囲（130.211.0.0/22と35.191.0.0/16）を使用します。これらの範囲からのインバウンドトラフィックのみを許可するファイアウォールルールを構成することで、バックエンドがロードバランサーからのリクエストのみを受け入れるようにできます。同時にヘルスチェックのソースIPも許可する必要があります。バックエンドVMは外部IPを持っていても持っていなくても構いません。"
    },
    {
      "id": "gcp-pne-set3-ja-q4",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ハイブリッド相互接続の実装",
      "question": "より高速な障害検出を実現するために、Cloud RouterのBGPキープアライブタイマーとホールドタイマーを構成する必要があります。しかし、これらのタイマーを特定の値未満に設定できないことがわかりました。なぜですか？",
      "options": {
        "A": "Cloud RouterはカスタムBGPタイマーをサポートしていない",
        "B": "BGPタイマーには最小値制限があり、サブセコンドの障害検出にはBFDを使用する必要がある",
        "C": "この機能を有効にするためにGoogleサポートに連絡する必要がある",
        "D": "タイマーはオンプレミスルーター側で構成する必要がある"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "BGPプロトコル自体のホールドタイムの最小値は3秒です。より高速な障害検出を実現するには、BFD（双方向転送検出）を使用する必要があります。Cloud RouterはBFDをサポートしており、ミリ秒レベルの検出間隔と乗数を構成でき、サブセコンドの障害検出を実現できます。BFDはBGPとは独立して動作し、障害を検出するとBGPに通知してセッションを終了させます。"
    },
    {
      "id": "gcp-pne-set3-ja-q5",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワーク運用の管理と監視",
      "question": "トラフィック、接続数、パケットロス率などのVPCネットワークの主要メトリクスを表示するダッシュボードを作成する必要があります。どのツールを使用すべきですか？",
      "options": {
        "A": "VPCフローログとData Studio",
        "B": "Cloud Monitoringカスタムダッシュボード",
        "C": "Network Intelligence Centerのネットワークトポロジ",
        "D": "BigQuery BI Engine"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Cloud MonitoringはVPCネットワークのさまざまなメトリクスを提供し、送受信バイトとパケット、パケットロス率、接続数などが含まれます。Cloud Monitoringのカスタムダッシュボード機能を使用して、これらのメトリクスを表示するチャートを作成し、時間範囲を設定し、アラートを構成できます。これは最も直接的で統合されたネットワーク監視ソリューションです。"
    },
    {
      "id": "gcp-pne-set3-ja-q6",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "クラウドネットワークの設計と計画",
      "question": "組織はネットワークセグメンテーション戦略を実装しています。本番環境、開発環境、テスト環境をネットワークレベルで完全に分離する必要がありますが、一部の共有サービスへのアクセスを許可する必要があります。最適なアーキテクチャは何ですか？",
      "options": {
        "A": "同じVPCで異なるサブネットとファイアウォールルールを使用する",
        "B": "独立したVPCを作成し、VPCピアリングで共有サービスVPCに接続する",
        "C": "共有VPCを使用し、異なる環境に異なるサービスプロジェクトを使用する",
        "D": "各環境に独立した組織を作成する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "各環境に独立したVPCを作成することで、最も強力なネットワーク分離が提供されます。VPCピアリングで共有サービスVPC（ログ、監視、認証サービスなど）に接続することで、サービス共有が実現されます。このハブアンドスポークトポロジにより、共有サービスの一元管理が可能になり、環境間の分離も維持されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q7",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "VPCネットワークの実装",
      "question": "300以上のVPCピアリング接続をサポートするようにVPCを構成する必要があります。デフォルトの制限では要件を満たせません。どうすべきですか？",
      "options": {
        "A": "VPCピアリングの代わりにVPNを使用する",
        "B": "クォータ増加をリクエストする",
        "C": "トランジットルーティングを使用した中央VPCを使用する",
        "D": "VPCピアリングにはそのような制限はない"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "VPCピアリング接続のデフォルト制限は各VPCにつき25の直接ピアリングです。これはソフトクォータであり、Google Cloud ConsoleまたはサポートへのContact経由で増加をリクエストできます。多数のピアリング接続が必要なシナリオでは、クォータ増加が最も直接的なソリューションです。注意：VPCピアリングはトランジットルーティングをサポートしていないため、中央VPCソリューションは適用されません。"
    },
    {
      "id": "gcp-pne-set3-ja-q8",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワークサービスの構成",
      "question": "API Gatewayのレート制限を構成して、単一のクライアントが過剰なリクエストを送信することを防ぐ必要があります。どのコンポーネントを使用すべきですか？",
      "options": {
        "A": "VPCファイアウォールルール",
        "B": "Cloud Armorレート制限ルール",
        "C": "Cloud NAT接続制限",
        "D": "ロードバランサー接続タイムアウト設定"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Cloud Armorはレート制限ルールをサポートしており、クライアントIPアドレス、ヘッダー情報、またはその他の属性に基づいてリクエストレートを制限できます。しきい値を構成した後、制限を超えたリクエストは拒否（429ステータスコードを返す）またはスロットリングされます。これはAPIを乱用やDDoS攻撃から保護する効果的な方法です。"
    },
    {
      "id": "gcp-pne-set3-ja-q9",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ハイブリッド相互接続の実装",
      "question": "Dedicated Interconnectを構成しています。VLANアタッチメントでBGPセッションを確立するために、どのパラメータを構成する必要がありますか？",
      "options": {
        "A": "VLAN IDのみを構成する",
        "B": "VLAN ID、ピアASN、Cloud RouterリンクIP、およびカスタマールーターIP",
        "C": "Cloud Routerを選択するだけで、他は自動構成される",
        "D": "IPsec鍵とBGPパスワード"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "VLANアタッチメントの構成には以下が必要です：VLAN ID（オンプレミス側とマッチング）、ピアASN（オンプレミスルーターのBGP AS番号）、Cloud RouterリンクIP（/29または/30セグメントのGCP側IP）、およびカスタマールーターIP（オンプレミス側IP）。これらのパラメータはBGPセッションの確立に使用されます。IPsecはInterconnectには適用されません。物理接続を使用し、暗号化トンネルは使用しません。"
    },
    {
      "id": "gcp-pne-set3-ja-q10",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワーク運用の管理と監視",
      "question": "Cloud VPNトンネルが断続的に切断されています。問題の原因を分析する必要があります。どのログを確認すべきですか？",
      "options": {
        "A": "VMインスタンスのシステムログ",
        "B": "Cloud VPNゲートウェイのCloud Loggingログ",
        "C": "VPCフローログ",
        "D": "Cloud RouterのBGPログ"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Cloud VPNゲートウェイのログはCloud Loggingに記録され、IKEネゴシエーション、トンネル状態の変化、エラー情報などの詳細が含まれます。これらのログは、トンネル切断の原因を診断するのに役立ちます（IKEパラメータの不一致、ネットワークタイムアウト、DPD障害など）。ログフィルタでresource.type=\"vpn_gateway\"を使用してログを表示します。"
    },
    {
      "id": "gcp-pne-set3-ja-q11",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "クラウドネットワークの設計と計画",
      "question": "機密医療データを処理するアプリケーション用にネットワークを設計しています。HIPAA準拠要件を満たす必要があり、すべてのデータアクセスとネットワークアクティビティを監査する必要があります。どの機能を有効にすべきですか？",
      "options": {
        "A": "Cloud Audit Logsのみを有効にする",
        "B": "VPCフローログ、Cloud Audit Logs、およびAccess Transparencyを有効にする",
        "C": "サードパーティセキュリティツールのみを使用する",
        "D": "Cloud Armorとファイアウォールルールログを有効にする"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "HIPAAコンプライアンスには包括的な監査能力が必要です。VPCフローログはネットワークトラフィックを記録し、Cloud Audit LogsはAPI呼び出しとデータアクセスを記録し、Access TransparencyはGoogleスタッフによるお客様データへのアクセス（サポートが必要な場合）を記録します。これらの組み合わせにより、HIPAA監査要件を満たす完全な可視性が提供されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q12",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "VPCネットワークの実装",
      "question": "VPC内でマイクロセグメンテーションを実装し、同じサブネット内のVM間のトラフィックも制御できるようにする必要があります。どのように実装すべきですか？",
      "options": {
        "A": "各VMに個別のサブネットを使用する",
        "B": "VPCファイアウォールルールとネットワークタグまたはサービスアカウントを使用する",
        "C": "VPCファイアウォールは同じサブネット内のトラフィックを制御できない",
        "D": "Cloud NATを使用してトラフィックを分離する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "VPCファイアウォールルールは同じサブネット内のVM間のトラフィックを制御できます。ネットワークタグまたはサービスアカウントをソースとターゲットとして使用することで、細かいルールを作成できます。例えば、web-serverタグのVMがdatabaseタグのVMのポート3306にアクセスできるように許可します。これにより、IPアドレスやサブネットに依存しないマイクロセグメンテーションが実現されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q13",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワークサービスの構成",
      "question": "バックエンドがメンテナンス状態の場合にクライアントにカスタムエラーページを返すようにロードバランサーを構成する必要があります。どのように構成すべきですか？",
      "options": {
        "A": "バックエンドサーバーでエラーページを構成する",
        "B": "HTTP(S)ロードバランサーのカスタムエラーレスポンス機能を使用する",
        "C": "Cloud CDNを構成してエラーページをキャッシュする",
        "D": "URLマップを使用してエラーページにリダイレクトする"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "HTTP(S)ロードバランサーはカスタムエラーレスポンスをサポートしています。特定のHTTPステータスコード（502、503など）に対してカスタムレスポンスを構成でき、静的HTMLコンテンツを含めることができます。すべてのバックエンドが異常であるか、これらのエラーを返す場合、ロードバランサーはデフォルトのエラーメッセージではなく、構成したカスタムページを返します。"
    },
    {
      "id": "gcp-pne-set3-ja-q14",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ハイブリッド相互接続の実装",
      "question": "組織には2つの異なる地理的位置にデータセンターがあり、両方ともGCPに接続する必要があります。サイト間でGCPネットワークを介して通信できるようにするには、どのように設計すべきですか？",
      "options": {
        "A": "各サイトを独立してGCPに接続し、サイト間はVPNで接続する",
        "B": "Cloud Interconnectを使用して両方のサイトを同じVPCに接続し、グローバル動的ルーティングを有効にする",
        "C": "一方のサイトのみを接続し、もう一方は最初のサイト経由でアクセスする",
        "D": "公共のインターネットを使用して2つのサイトを接続する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Cloud Interconnectを使用して両方のサイトを同じGCP VPCに接続し、VPCのグローバル動的ルーティングモードを有効にします。Cloud Routerは両方のサイトからのルートを学習し、VPC内で伝播します。これにより、2つのサイトはGoogleのバックボーンネットワーク経由で通信でき、Googleの高速・低レイテンシのグローバルネットワークを活用できます。"
    },
    {
      "id": "gcp-pne-set3-ja-q15",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワーク運用の管理と監視",
      "question": "すべてのVPC、サブネット、ファイアウォールルール、ルートの構成を含むネットワークコンプライアンスレポートを定期的に生成する必要があります。どのツールを使用すべきですか？",
      "options": {
        "A": "gcloudスクリプトを作成して定期的に構成をエクスポートする",
        "B": "Cloud Asset Inventoryを使用してリソースデータをエクスポートする",
        "C": "Network Intelligence Centerの構成レポートを使用する",
        "D": "Cloud Consoleから手動でエクスポートする"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Cloud Asset Inventoryは、VPC、サブネット、ファイアウォールルール、ルートなどのネットワークリソースを含む、組織またはプロジェクト内のすべてのリソースの構成をエクスポートできます。BigQueryまたはCloud Storageへのエクスポートをサポートし、エクスポートジョブを定期的に実行してコンプライアンスレポートを生成できます。これにより、監査とコンプライアンスの目的に適した完全で一貫したリソーススナップショットが提供されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q16",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "クラウドネットワークの設計と計画",
      "question": "パートナー企業がGCP内の特定のサービスに安全にアクセスできるようにするネットワークアーキテクチャを設計する必要があります。パートナーをVPCに含めたり、ネットワーク認証情報を共有したりする必要はありません。最適なソリューションは何ですか？",
      "options": {
        "A": "VPNを使用してパートナーネットワークに接続する",
        "B": "パブリックエンドポイントにアクセスするためのIAMユーザーをパートナーに作成する",
        "C": "Private Service Connectを使用してサービスを公開し、パートナーがサブスクライブする",
        "D": "VPCピアリングを使用してパートナーのGCPプロジェクトに接続する"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "Private Service Connectを使用すると、サービスをプライベートエンドポイントとして公開でき、パートナーは自分のVPC内でエンドポイントを作成してサービスを消費できます。これにはネットワークピアリング、VPN、または認証情報の共有は必要なく、安全なサービス共有メカニズムが提供されます。サービスプロバイダーは誰が接続できるかを制御し、消費者はプライベートで専用のエンドポイントを取得します。"
    },
    {
      "id": "gcp-pne-set3-ja-q17",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "VPCネットワークの実装",
      "question": "特定の外部IP範囲へのVMアクセスをブロックするが、他のすべての外部アドレスへのアクセスを許可する送信ファイアウォールルールを構成する必要があります。どのように構成すべきですか？",
      "options": {
        "A": "低優先度のすべて許可送信ルールを作成し、次に高優先度の特定範囲を拒否するルールを作成する",
        "B": "高優先度のすべて許可送信ルールを作成し、次に低優先度の特定範囲を拒否するルールを作成する",
        "C": "特定の範囲を拒否するルールのみを作成し、暗黙のすべて許可送信ルールに依存する",
        "D": "VPCファイアウォールは送信ルールをサポートしていない"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "VPCファイアウォールには暗黙のすべての送信トラフィックを許可するルール（最低優先度65535）があります。特定のIP範囲を拒否する送信ルール（より高い優先度）を作成するだけで、そのルールが暗黙のルールより先にマッチします。拒否された範囲外のトラフィックは暗黙の許可ルールにマッチします。明示的にすべて許可するルールを作成する必要はありません。"
    },
    {
      "id": "gcp-pne-set3-ja-q18",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワークサービスの構成",
      "question": "パスベースのルーティングをサポートするように内部HTTP(S)ロードバランサーを構成し、異なるURLパスのリクエストを異なるバックエンドサービスに送信する必要があります。どのように構成すべきですか？",
      "options": {
        "A": "複数のロードバランサーを作成し、それぞれが異なるパスを処理する",
        "B": "URLマップを構成してパスルールと対応するバックエンドサービスを定義する",
        "C": "内部HTTP(S)ロードバランサーはパスルーティングをサポートしていない",
        "D": "Cloud DNSを使用してパスに基づいてリクエストをルーティングする"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "内部HTTP(S)ロードバランサー（内部アプリケーションロードバランサー）はURLマップをサポートしています。URLマップを作成する際に、ホストルールとパスマッチングルールを定義し、異なるパス（/api/*、/static/*など）を異なるバックエンドサービスにマッピングします。これにより、コンテンツベースのルーティングが実現され、1つのロードバランサーで複数のバックエンドにサービスを提供できます。"
    },
    {
      "id": "gcp-pne-set3-ja-q19",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ハイブリッド相互接続の実装",
      "question": "HA VPNを使用しており、両方のトンネルがアクティブですが、トラフィックが1つのトンネルのみを通過していることに気づきました。オンプレミスルーターは両方のトンネルでBGPセッションが確立されていることを示しています。考えられる原因は何ですか？",
      "options": {
        "A": "HA VPNはアクティブ-スタンバイモードのみをサポートしている",
        "B": "オンプレミスルーターのBGP構成でECMPが有効になっていない",
        "C": "GCP側のCloud Router構成が間違っている",
        "D": "トンネル帯域幅が制限に達している"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "HA VPNとCloud Routerは、デフォルトでアクティブ-アクティブモードとECMP負荷分散をサポートしています。トラフィックが1つのトンネルのみを通過している場合、通常はオンプレミスルーターでECMPが正しく構成されていないことが原因です。オンプレミスルーターでECMPが有効になっており、両方のパスが同じメトリック値を持っていることを確認してください。Cloud Routerは自動的に両方のトンネルを通じて同じルートを通知します。"
    },
    {
      "id": "gcp-pne-set3-ja-q20",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワーク運用の管理と監視",
      "question": "新しいファイアウォールルールを適用する前に、既存のトラフィックに影響するかどうかをテストする必要があります。どの方法を使用すべきですか？",
      "options": {
        "A": "本番環境にルールを直接適用して監視する",
        "B": "構成を複製してテストVPCを作成する",
        "C": "Network Intelligence Centerの接続テストを使用してルールの影響をシミュレートする",
        "D": "VPCフローログを分析して影響を予測する"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "Network Intelligence Centerの接続テストは、エンドツーエンドのネットワークパスをシミュレートし、ファイアウォールルールの影響を分析できます。ルールを実際に適用せずに、ルールを追加または変更した場合に何が起こるかをテストできます。これにより、本番トラフィックを中断するリスクなしにルールの変更を検証する安全な方法が提供されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q21",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "クラウドネットワークの設計と計画",
      "question": "アプリケーションはインターネットに大量の小さなパケットを送信する必要があります。Cloud NATの送信接続数が制限に達していることに気づきました。どのように解決すべきですか？",
      "options": {
        "A": "Cloud NATゲートウェイの数を増やす",
        "B": "Cloud NATに割り当てる外部IPアドレスの数を増やす",
        "C": "NATタイムアウト時間を短縮する",
        "D": "上記すべてが問題解決に役立つ"
      },
      "answer": "D",
      "answerType": "single",
      "explanation": "Cloud NATの接続数制限は、割り当てられたIPアドレス数とポート割り当てに依存します。ソリューションには以下が含まれます：1）NAT IPアドレスを増やす（各IPは約64000ポートを提供）、2）TCP/UDPタイムアウト時間を短縮してポートをより早く解放する、3）動的ポート割り当てを構成する、4）複数のサブネットを使用している場合は複数のNATゲートウェイが必要になる場合があります。これらすべての方法が利用可能な送信接続数を増やすことができます。"
    },
    {
      "id": "gcp-pne-set3-ja-q22",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "VPCネットワークの実装",
      "question": "VPCを構成して、Compute EngineインスタンスがデフォルトのGCPメタデータサーバーではなくカスタムメタデータサーバーを使用できるようにする必要があります。どのように実装すべきですか？",
      "options": {
        "A": "VPCのメタデータサーバー設定を変更する",
        "B": "169.254.169.254へのカスタムルートを作成してサーバーを指定する",
        "C": "これは不可能です。メタデータサーバーはGCPによって管理されています",
        "D": "インスタンス起動スクリプトで/etc/hostsを変更する"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "GCPのメタデータサーバー（169.254.169.254）はGoogleが管理するシステムサービスであり、カスタムルートで上書きしたり置き換えたりすることはできません。これは設計上の決定であり、インスタンスが必要なメタデータ（サービスアカウント認証情報、インスタンス属性など）に常にアクセスできることを保証します。追加のメタデータサービスが必要な場合は、異なるIPアドレスでデプロイする必要があります。"
    },
    {
      "id": "gcp-pne-set3-ja-q23",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワークサービスの構成",
      "question": "Cloud StorageバケットからのコンテンツをキャッシュするようにCloud CDNを構成する必要があります。バケット内のオブジェクトはプライベートです。どのように構成すべきですか？",
      "options": {
        "A": "バケットをパブリックアクセスに設定する",
        "B": "バックエンドバケットを構成し、署名付きURLを使用する",
        "C": "Cloud CDNはプライベートCloud Storageオブジェクトをキャッシュできない",
        "D": "Cloud CDNサービスアカウントにバケットアクセス権限を付与する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Cloud CDNはプライベートCloud Storageオブジェクトをキャッシュできます。バックエンドバケットを構成した後、署名付きURLを使用してアクセスを制御します。クライアントは署名付きURLでコンテンツをリクエストし、Cloud CDNは署名を検証した後コンテンツをキャッシュします。後続のリクエストは、署名が期限切れになるかコンテンツが更新されるまでキャッシュから提供できます。これにより、CDNアクセラレーションを提供しながらセキュリティが維持されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q24",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ハイブリッド相互接続の実装",
      "question": "組織はより高い帯域幅を得るためにPartner InterconnectからDedicated Interconnectへの移行を決定しました。移行中に接続を中断しないようにする必要があります。移行をどのように計画すべきですか？",
      "options": {
        "A": "まずPartner Interconnectを切断し、次にDedicated Interconnectを構成する",
        "B": "Dedicated Interconnectを並行して構成し、トラフィックを移行した後Partner Interconnectを切断する",
        "C": "一時的な接続としてVPNを使用する",
        "D": "GoogleにPartner Interconnect帯域幅の一時的な増加をリクエストする"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "ダウンタイムなしの移行の最良の方法は、両方の接続を並行して実行することです。まずDedicated Interconnectを構成してテストし、BGPセッションが確立されルートが正しいことを確認します。次に、ルーティングポリシー（BGP ASパスプリペンドやMED値など）を調整して、トラフィックを徐々にDedicated Interconnectに移行します。すべてのトラフィックが新しい接続を通過していることを確認した後、Partner Interconnectを切断します。"
    },
    {
      "id": "gcp-pne-set3-ja-q25",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワーク運用の管理と監視",
      "question": "ネットワークセキュリティインシデントに自動的に対応する必要があります。例えば、不審なトラフィックが検出された場合にファイアウォールルールを自動的に更新します。どのアーキテクチャを使用すべきですか？",
      "options": {
        "A": "ログを手動で監視してルールを更新する",
        "B": "Cloud Functions、ログルーター、Pub/Subを使用してレスポンスを自動化する",
        "C": "サードパーティSIEMツールを使用する",
        "D": "Cloud Armorの適応型保護を構成する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "自動化されたセキュリティレスポンスのアーキテクチャ：ログルーターを構成してセキュリティ関連のログ（VPCフローログ、ファイアウォールログなど）をPub/Subに送信し、Cloud Functionsをトリガーして分析します。不審なパターンが検出された場合、Cloud FunctionsはCompute Engine APIを使用してファイアウォールルールを自動的に作成または更新します。これにより、リアルタイムの自動化されたセキュリティレスポンスが実現されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q26",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "クラウドネットワークの設計と計画",
      "question": "世界中の複数の場所にアプリケーションをデプロイし、ユーザーが最も近い場所に接続されるようにするエッジコンピューティングアーキテクチャを設計しています。最適なソリューションは何ですか？",
      "options": {
        "A": "各リージョンに独立したアプリケーションインスタンスとロードバランサーをデプロイする",
        "B": "マルチリージョンバックエンドを持つグローバル外部HTTP(S)ロードバランサーを使用する",
        "C": "Cloud CDNを使用して動的コンテンツをキャッシュする",
        "D": "Cloud DNSラウンドロビンを構成して複数のリージョンのIPに分散する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "グローバル外部HTTP(S)ロードバランサーはGoogleのグローバルエニーキャストネットワークを使用し、ユーザーリクエストを最も近い健全なバックエンドに自動的にルーティングします。マルチリージョンバックエンドグループを構成すると、ロードバランサーはレイテンシ、バックエンドの健全性、容量を考慮して最適なバックエンドを選択します。これはDNSラウンドロビンよりも正確な地理的ルーティングと高速なフェイルオーバーを提供します。"
    },
    {
      "id": "gcp-pne-set3-ja-q27",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "VPCネットワークの実装",
      "question": "VPCに重複するIP範囲を持つ複数のサブネットがあります。これらのサブネットを統一されたIP計画にマージする必要があります。どのように進めるべきですか？",
      "options": {
        "A": "既存のサブネットのIP範囲を直接変更する",
        "B": "新しいサブネットを作成し、リソースを移行し、古いサブネットを削除する",
        "C": "VPCピアリングを使用して重複するサブネットを接続する",
        "D": "GCPは同じVPC内で重複するIPを持つサブネットを許可しない"
      },
      "answer": "D",
      "answerType": "single",
      "explanation": "GCP VPCは同じVPC内でIP範囲が重複するサブネットの作成を許可しません。現在重複するIPがある場合、それらは異なるVPCにある必要があります。統一されたIP計画にマージするには：1）新しいIP範囲を使用するサブネットを作成する、2）リソースを新しいサブネットに移行する、3）古いサブネットを削除する必要があります。サブネットのIP範囲は作成後に変更できず、拡張のみ可能です。"
    },
    {
      "id": "gcp-pne-set3-ja-q28",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワークサービスの構成",
      "question": "バックエンドインスタンスが再起動後、トラフィックを受信する前に十分なウォームアップ時間を持てるようにロードバランサーのヘルスチェックを構成する必要があります。どのように構成すべきですか？",
      "options": {
        "A": "ヘルスチェック間隔を増やす",
        "B": "ヘルスチェックの初期遅延（Initial Delay）を構成する",
        "C": "健全しきい値（Healthy Threshold）を減らす",
        "D": "HTTPの代わりにTCPヘルスチェックを使用する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "ヘルスチェックの初期遅延（Initial Delay）パラメータは、インスタンス起動後にヘルスチェックを開始するまでの待機時間を指定します。これにより、アプリケーションが十分なウォームアップ時間（キャッシュのロード、接続プールの確立など）を得られます。初期遅延期間中、インスタンスはトラフィックを受信しません。これは単にチェック間隔を増やすよりもウォームアップ動作をより正確に制御します。"
    },
    {
      "id": "gcp-pne-set3-ja-q29",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ハイブリッド相互接続の実装",
      "question": "Cloud Routerを構成しており、オンプレミスネットワークから通知された特定のルートがVPCルートテーブルにインポートされないようにする必要があります。どのように構成すべきですか？",
      "options": {
        "A": "オンプレミスルーターで送信ルート通知をフィルタリングする",
        "B": "Cloud RouterのインバウンドBGPルートポリシーを構成する",
        "C": "VPCファイアウォールルールを使用してこれらのルートのトラフィックをブロックする",
        "D": "VPCルートテーブルから不要なルートを手動で削除する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Cloud RouterはBGPルートポリシーをサポートしており、インバウンドルートフィルタリングが含まれます。ポリシーを構成して特定のプレフィックスのルートを受け入れまたは拒否し、ルート属性（優先度など）を変更できます。これによりGCP側でルートフィルタリングが実装され、オンプレミスルーターの構成に依存しません。ルートポリシーを使用して、学習されたルートのどれがVPCにインポートされるかを正確に制御できます。"
    },
    {
      "id": "gcp-pne-set3-ja-q30",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワーク運用の管理と監視",
      "question": "VPC Service Controlsが不正なネットワークからのデータアクセス試行を正しくブロックしているかどうかを確認する必要があります。どのログを確認すべきですか？",
      "options": {
        "A": "VPCフローログ",
        "B": "Data AccessauditログとVPC Service Controlsログ",
        "C": "ファイアウォールルールログ",
        "D": "Cloud Armorログ"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "VPC Service Controlsの違反とアクセス試行はCloud Audit Logsに記録されます。Policy Deniedログを確認すると、ソースIP、ID、リクエストされたサービス、違反されたポリシーなど、ブロックされたアクセス試行を確認できます。Data Access監査ログはデータアクセス操作を記録します。これらのログは、サービス境界が期待どおりに機能しているかどうかを確認するのに役立ちます。"
    },
    {
      "id": "gcp-pne-set3-ja-q31",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "クラウドネットワークの設計と計画",
      "question": "組織には厳格なデータ主権要件があり、すべてのデータは特定の国/地域で保存および処理される必要があります。ネットワークアーキテクチャはこの要件をどのようにサポートすべきですか？",
      "options": {
        "A": "グローバルVPCを使用し、アプリケーションレベルのデータルーティングに依存する",
        "B": "リージョナルリソースを使用し、組織ポリシーでリソースの場所を制限し、リージョナルロードバランシングを使用する",
        "C": "Cloud CDNを使用してデータが正しい場所にキャッシュされるようにする",
        "D": "VPNを構成してデータを特定のリージョンにルーティングする"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "データ主権要件を満たすには：1）組織ポリシーを使用してリソースを作成できる場所を制限する、2）グローバルではなくリージョナルロードバランサーとリソースを使用する、3）すべてのデータストレージサービスが許可されたリージョンで構成されていることを確認する必要があります。グローバルロードバランサーは健全な任意のバックエンドにトラフィックをルーティングするため、データ主権要件に違反する可能性があります。"
    },
    {
      "id": "gcp-pne-set3-ja-q32",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "VPCネットワークの実装",
      "question": "VPCでNATゲートウェイを構成する必要があり、一部のVMはNATを使用してインターネットにアクセスし、他のVMは自分の外部IPを直接使用する必要があります。どのように構成すべきですか？",
      "options": {
        "A": "NATを使用するVMに別のサブネットを作成する",
        "B": "外部IPを持たないVMにのみ影響するようにCloud NATを構成する",
        "C": "各VMグループに異なるCloud NATゲートウェイを作成する",
        "D": "Cloud NATはすべてのVMに均一に適用され、区別できない"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Cloud NATはデフォルトで外部IPアドレスを持たないVMにのみ影響します。外部IPを持つVMは送信接続に自分のIPを使用します。したがって、NATが必要なVMには外部IPを割り当てず、直接アクセスが必要なVMには外部IPを割り当てるだけです。Cloud NATは自動的にこれら2つのケースを区別し、特別な構成は必要ありません。"
    },
    {
      "id": "gcp-pne-set3-ja-q33",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワークサービスの構成",
      "question": "SSL/TLSトラフィックを処理するロードバランサーを構成する必要があり、バックエンドサーバーでSSLを終端する（エンドツーエンド暗号化）必要があります。どの構成を選択すべきですか？",
      "options": {
        "A": "SSLプロキシロードバランサー",
        "B": "バックエンドHTTPSを持つHTTP(S)ロードバランサー",
        "C": "TCPプロキシロードバランサー",
        "D": "ネットワークロードバランサー（パススルー）"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "HTTP(S)ロードバランサーはエンドツーエンド暗号化を構成できます：クライアントからロードバランサーへはHTTPS、ロードバランサーからバックエンドへもHTTPSを使用します。バックエンドサービス構成でHTTPSプロトコルを選択すると、ロードバランサーはバックエンドと新しいTLS接続を確立します。これにより、エンドツーエンド暗号化を維持しながら7層機能（URLルーティングなど）が提供されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q34",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ハイブリッド相互接続の実装",
      "question": "Cloud Interconnectを使用してGCPをAWSに接続する必要があります。Google CloudとAWSの間には直接相互接続製品がありません。どのソリューションを使用すべきですか？",
      "options": {
        "A": "GoogleのCross-Cloud Interconnectを使用する",
        "B": "パートナーが提供するネットワークを介して2つのクラウドを接続する",
        "C": "パブリックインターネットVPNを使用する",
        "D": "これは不可能で、従来のWANを使用する必要がある"
      },
      "answer": "A",
      "answerType": "single",
      "explanation": "Google CloudはCross-Cloud Interconnectを提供しており、GCPを他のクラウドプロバイダー（AWS、Azureなど）に接続するために特別に設計されています。これはGoogleのエッジロケーションと他のクラウドの間に専用の低レイテンシ接続を提供します。構成には、GCPでInterconnectとVLANアタッチメントを作成し、AWSでDirect Connectを作成することが含まれます。これはパートナーやVPN経由よりも優れたパフォーマンスと信頼性を提供します。"
    },
    {
      "id": "gcp-pne-set3-ja-q35",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワーク運用の管理と監視",
      "question": "VPC内でファイアウォールルールが変更された場合にすぐにセキュリティチームに通知するアラートを設定する必要があります。どのように構成すべきですか？",
      "options": {
        "A": "VPCフローログの変化を監視する",
        "B": "Cloud Audit Logsのログルーターを構成してPub/Sub通知をトリガーする",
        "C": "Cloud Monitoringでファイアウォールメトリクスを監視する",
        "D": "スクリプトを使用して定期的にファイアウォールルール構成を比較する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "ファイアウォールルールの作成、変更、削除操作は管理アクティビティ監査ログに記録されます。ログルーターを構成してcompute.firewalls.insert/update/delete操作をフィルタリングし、マッチするログをPub/Subに送信します。次に、Pub/Subサブスクリプションを構成してメール通知をトリガーするか、Cloud Functionsを呼び出します。これにより、リアルタイムのファイアウォール変更アラートが提供されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q36",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "クラウドネットワークの設計と計画",
      "question": "複数のチームが独立してそれぞれのネットワークリソースを管理できるようにしながら、中央ITが管理するコアネットワークインフラストラクチャを共有するネットワークアーキテクチャを設計する必要があります。最適なソリューションは何ですか？",
      "options": {
        "A": "各チームが完全に独立したプロジェクトとVPCを使用する",
        "B": "共有VPCを使用し、中央ITがホストプロジェクトを管理し、チームがサービスプロジェクトを使用する",
        "C": "すべてのチームが同じプロジェクトを使用し、IAMで権限を割り当てる",
        "D": "VPCピアリングを使用して各チームのVPCを接続する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "共有VPCはこのシナリオの理想的なソリューションです。中央ITチームはホストプロジェクト内のネットワークリソース（VPC、サブネット、ファイアウォールルール、ルート）を管理し、各チームはサービスプロジェクト内でコンピューティングリソースを独立して管理します。チームは共有ネットワーク内のサブネットを使用できますが、ネットワーク構成を変更することはできません。これにより、ネットワークの一元管理と分散リソース管理のバランスが実現されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q37",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "VPCネットワークの実装",
      "question": "Alias IPを使用するGKEクラスターを構成しています。Pod IP範囲がVPC内の他のサブネットのIP範囲と競合しないようにする必要があります。どのように計画すべきですか？",
      "options": {
        "A": "GKEは自動的に競合しないIP範囲を選択する",
        "B": "サブネット作成時にPod用のセカンダリIP範囲を定義する",
        "C": "ネットワークポリシーを使用してPod IPを分離する",
        "D": "Pod IPはノードと同じIP範囲を使用する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "VPCネイティブGKEクラスターは、サブネットのセカンダリIP範囲をPod IPとして使用します。サブネット作成時に、Pod（およびService）用に1つ以上のセカンダリIP範囲を定義する必要があります。これらの範囲は、VPC内の他のサブネットのプライマリおよびセカンダリ範囲と重複してはいけません。計画時には、クラスターのスケールと将来の拡張ニーズを考慮し、十分に大きなCIDRブロックを選択する必要があります。"
    },
    {
      "id": "gcp-pne-set3-ja-q38",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワークサービスの構成",
      "question": "アプリケーションは複数のバックエンドサービスを使用しており、HTTPヘッダー情報（User-Agentなど）に基づいてトラフィックを異なるバックエンドにルーティングするようにロードバランサーを構成する必要があります。どのように構成すべきですか？",
      "options": {
        "A": "複数のロードバランサーを使用し、それぞれが特定のUser-Agentを処理する",
        "B": "HTTP(S)ロードバランサーのURLマップでヘッダーマッチングルールを構成する",
        "C": "Cloud Armorを使用してヘッダー情報に基づいてルーティングする",
        "D": "バックエンドアプリケーションでルーティングロジックを処理する"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "HTTP(S)ロードバランサーのURLマップは、HTTPヘッダーベースのマッチングを含む高度なルーティングルールをサポートしています。特定のヘッダー（User-Agent、Cookieなど）の値に基づいてリクエストを異なるバックエンドサービスにルーティングするルールを構成できます。これにより、バックエンドの処理や複数のロードバランサーを必要とせずに、ロードバランサーレイヤーでコンテンツルーティングが実装されます。"
    },
    {
      "id": "gcp-pne-set3-ja-q39",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ハイブリッド相互接続の実装",
      "question": "セキュリティポリシーに準拠するため、Cloud VPNのIPsec鍵が定期的にローテーションされるようにする必要があります。どのように実装すべきですか？",
      "options": {
        "A": "Cloud VPNはIKE鍵を自動的にローテーションする",
        "B": "鍵の自動ローテーション機能を構成する",
        "C": "事前共有鍵を手動で更新し、両端で適用する",
        "D": "事前共有鍵の代わりに証明書認証を使用する"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "Cloud VPNはIKEを使用してセッション鍵を自動的にネゴシエートしますが、事前共有鍵（PSK）は手動でローテーションする必要があります。ローテーション時には、GCPとオンプレミスの両端でPSKを同時に更新する必要があり、短時間の接続中断が発生します。ベストプラクティスは、複雑なPSKを使用し、セキュリティポリシーに従って定期的にローテーションすることです。GCPは自動PSKローテーション機能を提供していません。"
    },
    {
      "id": "gcp-pne-set3-ja-q40",
      "examId": "gcp-pne-set3-ja",
      "setNumber": 3,
      "domain": "ネットワーク運用の管理と監視",
      "question": "ネットワークコスト最適化戦略を実装し、どのリソースが最も多くの送信トラフィック費用を発生させているかを特定する必要があります。どのツールを使用すべきですか？",
      "options": {
        "A": "Cloud Monitoringのネットワークメトリクス",
        "B": "課金データをBigQueryにエクスポートしてネットワーク送信費用を分析する",
        "C": "VPCフローログのトラフィック統計",
        "D": "Network Intelligence Centerのコストレポート"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "課金データをBigQueryにエクスポートすると、ネットワーク送信トラフィック費用を含むコストを詳細に分析できます。プロジェクト、サービス、リージョン、SKUなどの次元で費用を分析し、最も多くの送信トラフィックコストを発生させているリソースを特定できます。Cloud Monitoringはトラフィックメトリクスを提供しますが、コストとは直接関連しません。課金分析がコスト最適化の正しいツールです。"
    }
  ]
}
