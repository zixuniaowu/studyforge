{
  "exam": {
    "id": "azure-dp-300-set3",
    "name": "Azure DP-300 数据库管理员模拟考试 #3",
    "code": "DP-300",
    "provider": "Azure",
    "language": "zh-CN",
    "description": "Microsoft Azure Database Administrator Associate认证考试模拟题，涵盖数据平台资源规划、安全环境实施、数据库监控优化、任务自动化配置和高可用性灾难恢复等核心领域",
    "totalQuestions": 40,
    "passingScore": 70,
    "examTime": 150,
    "domains": [
      {
        "id": 1,
        "name": "规划和实施数据平台资源 (Plan and implement data platform resources)",
        "weight": 23
      },
      {
        "id": 2,
        "name": "实施安全环境 (Implement a secure environment)",
        "weight": 18
      },
      {
        "id": 3,
        "name": "监控、配置和优化数据库资源 (Monitor, configure, and optimize database resources)",
        "weight": 23
      },
      {
        "id": 4,
        "name": "配置和管理任务自动化 (Configure and manage automation of tasks)",
        "weight": 13
      },
      {
        "id": 5,
        "name": "规划和实施高可用性和灾难恢复环境 (Plan and implement HA/DR environment)",
        "weight": 23
      }
    ],
    "tags": [
      "Azure",
      "DP-300",
      "数据库管理员",
      "认证考试",
      "SQL Server"
    ]
  },
  "questions": [
    {
      "id": "q1",
      "domain": 1,
      "question": "一家公司需要将包含大量存储过程和触发器的复杂SQL Server数据库迁移到Azure。数据库使用Service Broker功能。最佳目标是什么？",
      "options": {
        "A": "Azure SQL Database单一数据库",
        "B": "Azure SQL Managed Instance",
        "C": "Azure Synapse Analytics",
        "D": "Azure Database for MySQL"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Azure SQL Managed Instance支持Service Broker、SQL Server Agent、跨数据库查询等企业级功能，提供与本地SQL Server最高的兼容性。Azure SQL Database不支持Service Broker。这使Managed Instance成为复杂数据库迁移的理想选择。",
      "difficulty": "medium"
    },
    {
      "id": "q2",
      "domain": 1,
      "question": "配置Azure SQL Database的读取横向扩展(Read Scale-Out)后，如何将连接路由到只读副本？",
      "options": {
        "A": "使用单独的服务器名称",
        "B": "在连接字符串中添加ApplicationIntent=ReadOnly",
        "C": "创建新的数据库用户",
        "D": "使用不同的端口号"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "在连接字符串中指定ApplicationIntent=ReadOnly会将连接路由到只读副本。高级和业务关键服务层级默认包含一个只读副本。这允许分流报表和分析查询，减轻主数据库负载。",
      "difficulty": "medium"
    },
    {
      "id": "q3",
      "domain": 1,
      "question": "评估Azure SQL Database和Azure SQL Managed Instance的选择时，哪个功能仅在Managed Instance中可用？",
      "options": {
        "A": "自动备份",
        "B": "跨数据库事务",
        "C": "透明数据加密",
        "D": "Azure AD身份验证"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "跨数据库事务(分布式事务)仅在Azure SQL Managed Instance中支持。Azure SQL Database是单数据库架构，不支持跨数据库查询或事务。如果应用程序依赖这些功能，需要选择Managed Instance。",
      "difficulty": "medium"
    },
    {
      "id": "q4",
      "domain": 1,
      "question": "使用BACPAC文件将数据库导入Azure SQL Database时，有什么限制需要注意？",
      "options": {
        "A": "不支持导入索引",
        "B": "最大文件大小为50GB，且导入期间数据库不可用",
        "C": "只能导入空数据库",
        "D": "不支持导入存储过程"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "BACPAC导入有大小限制(使用Azure门户时最大200GB)，且是离线操作，导入期间目标数据库不可用。对于大型数据库，建议使用Azure数据库迁移服务(DMS)的在线迁移功能以减少停机时间。",
      "difficulty": "medium"
    },
    {
      "id": "q5",
      "domain": 1,
      "question": "配置Azure SQL Managed Instance的公共端点有什么安全考虑？",
      "options": {
        "A": "公共端点默认启用，无需额外配置",
        "B": "需要显式启用，且应配合NSG规则限制访问",
        "C": "公共端点比私有端点更安全",
        "D": "公共端点不需要身份验证"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Managed Instance的公共端点默认禁用，需要显式启用。启用后，应使用网络安全组(NSG)规则限制可以访问端点的IP地址范围。最佳安全实践是使用私有端点或VNet服务端点，避免暴露公共端点。",
      "difficulty": "medium"
    },
    {
      "id": "q6",
      "domain": 2,
      "question": "一家公司需要记录所有对Azure SQL Database敏感表的访问。应该配置什么功能？",
      "options": {
        "A": "透明数据加密",
        "B": "Azure SQL Database审计",
        "C": "动态数据掩码",
        "D": "Always Encrypted"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Azure SQL Database审计可以记录数据库事件，包括对特定表的SELECT、INSERT、UPDATE、DELETE操作。审计日志可以发送到存储账户、Log Analytics或事件中心。可以通过审计策略定义要跟踪的操作类型。",
      "difficulty": "easy"
    },
    {
      "id": "q7",
      "domain": 2,
      "question": "为了使用Azure AD身份验证连接Azure SQL Database，客户端应用程序需要什么？",
      "options": {
        "A": "SQL Server身份验证凭据",
        "B": "Azure AD访问令牌",
        "C": "Windows集成身份验证",
        "D": "数据库主密钥"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "使用Azure AD身份验证时，应用程序需要从Azure AD获取访问令牌，然后在连接中使用该令牌。可以使用托管标识、服务主体或用户凭据获取令牌。MSAL库简化了令牌获取过程。",
      "difficulty": "medium"
    },
    {
      "id": "q8",
      "domain": 2,
      "question": "哪种Azure SQL Database加密功能可以保护传输中的数据？",
      "options": {
        "A": "透明数据加密(TDE)",
        "B": "传输层安全性(TLS)",
        "C": "Always Encrypted",
        "D": "Azure磁盘加密"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "TLS加密保护客户端和服务器之间传输的数据。Azure SQL Database强制使用加密连接，并支持TLS 1.2。TDE保护静态数据，Always Encrypted保护敏感列数据。三者结合提供全面的数据保护。",
      "difficulty": "easy"
    },
    {
      "id": "q9",
      "domain": 2,
      "question": "使用Azure SQL Database的托管标识访问其他Azure服务(如Key Vault)有什么优势？",
      "options": {
        "A": "提高查询性能",
        "B": "无需在代码或配置中存储凭据",
        "C": "减少存储成本",
        "D": "自动数据备份"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "托管标识允许Azure SQL Database以安全方式访问其他Azure服务，无需存储或管理凭据。Azure自动管理标识的生命周期和凭据轮换。这消除了凭据泄露风险，简化了安全管理。",
      "difficulty": "medium"
    },
    {
      "id": "q10",
      "domain": 2,
      "question": "为Azure SQL Database配置静态IP防火墙规则和虚拟网络规则时，哪个具有更高优先级？",
      "options": {
        "A": "IP防火墙规则优先",
        "B": "虚拟网络规则优先",
        "C": "两者独立评估，满足任一即可访问",
        "D": "由创建顺序决定"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "IP防火墙规则和虚拟网络规则独立评估。如果连接来自允许的IP地址或允许的虚拟网络子网，连接就会被允许。两种规则可以同时存在，提供灵活的访问控制配置。",
      "difficulty": "hard"
    },
    {
      "id": "q11",
      "domain": 3,
      "question": "Azure SQL Database的查询存储(Query Store)默认捕获哪些信息？",
      "options": {
        "A": "仅查询文本",
        "B": "查询文本、执行计划和运行时统计信息",
        "C": "仅错误信息",
        "D": "仅执行计划"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Query Store捕获查询文本、执行计划和运行时统计信息(如执行时间、CPU使用、逻辑读取等)。这些数据可用于识别性能回归、比较不同时期的性能、强制执行计划。Azure SQL Database默认启用Query Store。",
      "difficulty": "easy"
    },
    {
      "id": "q12",
      "domain": 3,
      "question": "诊断Azure SQL Database的连接问题时，应该首先检查什么？",
      "options": {
        "A": "查询存储配置",
        "B": "防火墙规则和网络配置",
        "C": "索引碎片",
        "D": "备份历史"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "连接问题最常见的原因是防火墙配置。应首先验证客户端IP是否在允许列表中，或者如果使用VNet，是否正确配置了服务端点。Azure门户的\"连接字符串\"页面提供诊断连接问题的指导。",
      "difficulty": "easy"
    },
    {
      "id": "q13",
      "domain": 3,
      "question": "当Azure SQL Database的事务日志空间使用率持续很高时，可能的原因是什么？（选择两项）",
      "options": {
        "A": "长时间运行的事务",
        "B": "数据库文件过大",
        "C": "活动异地复制延迟",
        "D": "索引碎片过高"
      },
      "answer": ["A", "C"],
      "answerType": "multiple",
      "explanation": "长时间运行的事务会阻止日志截断，导致日志空间增长。异地复制延迟也会阻止日志截断，因为需要保留未复制的日志记录。应该识别并优化长事务，并监控异地复制延迟。",
      "difficulty": "hard"
    },
    {
      "id": "q14",
      "domain": 3,
      "question": "Azure SQL Database出现间歇性超时错误。最可能的原因是什么？",
      "options": {
        "A": "数据库服务器名称错误",
        "B": "资源争用或网络暂时性故障",
        "C": "数据库已被删除",
        "D": "用户密码过期"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "间歇性超时通常由资源争用(CPU、内存、IO达到限制)或暂时性网络问题造成。应用程序应实施重试逻辑来处理暂时性错误。持续的超时可能需要优化查询或升级服务层级。",
      "difficulty": "medium"
    },
    {
      "id": "q15",
      "domain": 3,
      "question": "如何识别Azure SQL Database中阻止其他会话的查询？",
      "options": {
        "A": "查询sys.dm_exec_requests的blocking_session_id列",
        "B": "使用SQL Server Profiler",
        "C": "检查Azure Activity Log",
        "D": "运行DBCC CHECKDB"
      },
      "answer": "A",
      "answerType": "single",
      "explanation": "sys.dm_exec_requests的blocking_session_id列显示阻止当前请求的会话ID。如果该值不为0，表示存在阻塞。结合sys.dm_exec_sql_text可以获取阻塞和被阻塞查询的SQL文本，帮助诊断问题。",
      "difficulty": "medium"
    },
    {
      "id": "q16",
      "domain": 3,
      "question": "为Azure SQL Database配置诊断日志以发送到Log Analytics后，可以执行什么操作？",
      "options": {
        "A": "仅查看最近1小时的日志",
        "B": "使用Kusto查询语言(KQL)分析日志和创建警报",
        "C": "自动优化数据库",
        "D": "自动缩放数据库"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Log Analytics允许使用Kusto查询语言(KQL)对诊断日志进行高级分析。可以查询历史数据、创建自定义仪表板、设置基于日志查询的警报。这提供了比Azure门户内置图表更强大的分析能力。",
      "difficulty": "medium"
    },
    {
      "id": "q17",
      "domain": 4,
      "question": "需要使用Terraform管理Azure SQL Database基础设施。以下哪项是正确的做法？",
      "options": {
        "A": "Terraform不支持Azure SQL Database",
        "B": "使用azurerm_mssql_database资源类型",
        "C": "只能使用ARM模板",
        "D": "使用azurerm_sql_server资源创建数据库"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Terraform的Azure Provider支持管理Azure SQL资源。azurerm_mssql_database用于创建数据库，azurerm_mssql_server用于创建服务器。这允许将Azure SQL基础设施作为代码管理，与其他云资源一起进行版本控制和自动化部署。",
      "difficulty": "medium"
    },
    {
      "id": "q18",
      "domain": 4,
      "question": "配置Azure SQL Database的自动故障转移组需要使用什么自动化方法来管理连接字符串？",
      "options": {
        "A": "每次故障转移后手动更新连接字符串",
        "B": "使用故障转移组的侦听器端点作为连接目标",
        "C": "轮询Azure API检查当前主服务器",
        "D": "在应用程序中硬编码两个服务器地址"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "故障转移组提供读写侦听器端点(<fog-name>.database.windows.net)，该端点始终指向当前主数据库。应用程序使用此端点，故障转移时连接自动重定向，无需更改应用程序配置。",
      "difficulty": "medium"
    },
    {
      "id": "q19",
      "domain": 4,
      "question": "需要为Azure SQL Database创建每日维护任务，包括统计信息更新和索引维护。由于SQL Server Agent不可用，最佳替代方案是什么？",
      "options": {
        "A": "手动每天运行脚本",
        "B": "使用Azure Automation Runbook和调度程序",
        "C": "依赖自动调优功能",
        "D": "使用Windows任务计划程序"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Azure Automation Runbook可以执行PowerShell或Python脚本，并使用调度程序定期运行。可以编写脚本连接到Azure SQL Database并执行T-SQL维护命令。这是SQL Server Agent的推荐替代方案。",
      "difficulty": "medium"
    },
    {
      "id": "q20",
      "domain": 4,
      "question": "使用Azure DevOps部署Azure SQL Database架构更改时，DACPAC和SQL脚本哪种方法更适合？",
      "options": {
        "A": "DACPAC始终更好",
        "B": "SQL脚本始终更好",
        "C": "DACPAC适合状态based部署，SQL脚本适合迁移based部署",
        "D": "两种方法完全相同"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "DACPAC是声明式(状态based)方法，定义期望的最终状态，sqlpackage自动生成更改脚本。SQL脚本是命令式(迁移based)方法，显式定义从当前状态到目标状态的步骤。选择取决于团队偏好和项目需求。",
      "difficulty": "hard"
    },
    {
      "id": "q21",
      "domain": 4,
      "question": "需要监控Azure SQL Database的长期性能趋势并创建报告。应该使用什么解决方案？",
      "options": {
        "A": "SQL Server Profiler",
        "B": "Azure Monitor指标和Log Analytics工作簿",
        "C": "SQL Server Management Studio",
        "D": "数据库控制台命令(DBCC)"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Azure Monitor收集性能指标并存储长达93天。Log Analytics可以存储更长时间的诊断日志。可以创建工作簿来可视化长期趋势，设置定期报告。这是Azure原生的监控解决方案。",
      "difficulty": "medium"
    },
    {
      "id": "q22",
      "domain": 5,
      "question": "Azure SQL Database的超大规模(Hyperscale)服务层级如何处理备份？",
      "options": {
        "A": "与其他层级相同的完整/差异/日志备份",
        "B": "基于存储层快照，提供近乎即时的备份和恢复",
        "C": "不支持备份",
        "D": "需要手动触发备份"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "超大规模使用分布式存储架构，备份基于存储快照而不是传统的备份方法。这使备份几乎瞬间完成，不影响性能，并允许快速的时间点恢复，即使是非常大的数据库也是如此。",
      "difficulty": "medium"
    },
    {
      "id": "q23",
      "domain": 5,
      "question": "配置Azure SQL Managed Instance的故障转移组后，DNS传播完成前应用程序可能遇到什么问题？",
      "options": {
        "A": "数据损坏",
        "B": "短暂的连接错误，直到DNS缓存刷新",
        "C": "数据丢失",
        "D": "性能下降"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "故障转移后，侦听器端点的DNS记录需要时间传播。在此期间，使用缓存DNS记录的应用程序可能尝试连接到旧的主服务器而失败。应用程序应实施重试逻辑来处理这种暂时性连接问题。",
      "difficulty": "medium"
    },
    {
      "id": "q24",
      "domain": 5,
      "question": "Azure SQL Database的业务关键服务层级与高级服务层级相比，高可用性方面有什么区别？",
      "options": {
        "A": "业务关键层不支持高可用性",
        "B": "两者使用相同的高可用性架构",
        "C": "业务关键使用Always On可用性组，高级使用远程存储",
        "D": "高级层提供更好的高可用性"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "业务关键服务层级和高级服务层级使用相同的高可用性架构，都基于Always On可用性组技术。两者都在本地保留多个数据副本，提供99.99%的SLA。主要区别在于购买模型(vCore vs DTU)。",
      "difficulty": "medium"
    },
    {
      "id": "q25",
      "domain": 5,
      "question": "需要测试Azure SQL Database灾难恢复计划。应该执行什么类型的故障转移？",
      "options": {
        "A": "强制故障转移(可能有数据丢失)",
        "B": "计划内故障转移(无数据丢失)",
        "C": "自动故障转移",
        "D": "删除主数据库"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "计划内故障转移在开始故障转移前会完全同步数据，确保没有数据丢失。这是测试DR计划的推荐方法。强制故障转移用于紧急情况，可能导致数据丢失。测试时应在低峰期执行计划内故障转移。",
      "difficulty": "easy"
    },
    {
      "id": "q26",
      "domain": 1,
      "question": "Azure SQL Database的vCore模型中，Gen5和Fsv2硬件选项的主要区别是什么？",
      "options": {
        "A": "Fsv2只支持更小的数据库",
        "B": "Fsv2提供更高的CPU性能，适合计算密集型工作负载",
        "C": "Gen5提供更多内存",
        "D": "两者完全相同"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Fsv2系列硬件提供更高的每核心CPU性能，适合计算密集型工作负载。Gen5是通用选项，适合大多数工作负载。选择取决于工作负载特性 - 如果CPU是瓶颈，Fsv2可能更合适。",
      "difficulty": "medium"
    },
    {
      "id": "q27",
      "domain": 1,
      "question": "使用Azure门户创建Azure SQL Database时，\"允许Azure服务和资源访问此服务器\"选项有什么影响？",
      "options": {
        "A": "只允许同一订阅内的服务访问",
        "B": "允许任何Azure服务(包括其他订阅)访问",
        "C": "只允许同一资源组内的服务访问",
        "D": "禁用所有外部访问"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "此选项允许来自任何Azure服务的连接，包括其他订阅的资源。这对于某些Azure服务集成是必需的，但也是潜在的安全风险。建议尽可能使用更精确的访问控制(私有端点或VNet服务端点)。",
      "difficulty": "medium"
    },
    {
      "id": "q28",
      "domain": 2,
      "question": "为Azure SQL Database启用Microsoft Defender for SQL后，漏洞评估扫描多久运行一次？",
      "options": {
        "A": "仅手动触发",
        "B": "每周自动运行一次",
        "C": "每天自动运行",
        "D": "每月运行一次"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "启用漏洞评估后，扫描每周自动运行一次。扫描检查安全配置问题、过度权限、敏感数据暴露等。结果显示在Azure门户中，可以设置基线来跟踪更改。也可以随时手动触发扫描。",
      "difficulty": "medium"
    },
    {
      "id": "q29",
      "domain": 2,
      "question": "在Azure SQL Database中创建包含数据库的用户(contained user)有什么好处？",
      "options": {
        "A": "提高查询性能",
        "B": "用户认证在数据库级别，便于数据库迁移和移植",
        "C": "减少存储空间",
        "D": "自动数据加密"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "包含数据库的用户将认证信息存储在数据库本身，而不是master数据库中的登录。这使数据库更加自包含，便于在服务器之间移动或复制数据库，无需单独迁移登录。",
      "difficulty": "medium"
    },
    {
      "id": "q30",
      "domain": 3,
      "question": "Azure SQL Database的内存中OLTP功能主要用于优化什么类型的工作负载？",
      "options": {
        "A": "大型报表查询",
        "B": "高吞吐量的事务处理",
        "C": "批量数据加载",
        "D": "备份操作"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "内存中OLTP使用内存优化表和本地编译存储过程来显著提高事务处理性能。它消除了锁争用，减少了闩锁，适合高并发、低延迟的OLTP场景。不适合分析或报表工作负载。",
      "difficulty": "medium"
    },
    {
      "id": "q31",
      "domain": 3,
      "question": "Azure SQL Database显示\"数据IO百分比\"指标持续很高。这表示什么问题？",
      "options": {
        "A": "CPU瓶颈",
        "B": "存储IO瓶颈，需要优化查询或升级服务层级",
        "C": "内存不足",
        "D": "网络延迟"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "高数据IO百分比表示数据库接近其IO限制。解决方案包括优化查询减少IO(添加索引、改进查询)、使用读取缓存、升级到更高的服务层级以获得更多IOPS，或使用超大规模层级获得更高IO性能。",
      "difficulty": "medium"
    },
    {
      "id": "q32",
      "domain": 3,
      "question": "在Azure SQL Database中执行统计信息更新的推荐方法是什么？",
      "options": {
        "A": "禁用自动统计信息更新",
        "B": "保持自动统计信息更新启用，必要时手动更新关键统计信息",
        "C": "每次查询前手动更新",
        "D": "只在周末更新"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Azure SQL Database默认启用自动统计信息更新，这对大多数工作负载足够。对于经历大量数据更改的表或对性能关键的查询，可以安排手动统计信息更新以确保优化器有最新信息。",
      "difficulty": "medium"
    },
    {
      "id": "q33",
      "domain": 4,
      "question": "需要在多个Azure SQL Database之间复制数据进行报表整合。最适合的Azure服务是什么？",
      "options": {
        "A": "Azure数据工厂",
        "B": "SQL Server Integration Services",
        "C": "Azure Stream Analytics",
        "D": "Azure Functions"
      },
      "answer": "A",
      "answerType": "single",
      "explanation": "Azure数据工厂是云原生的数据集成服务，支持从多个源复制和转换数据。它可以连接多个Azure SQL Database，执行ETL操作，并加载到报表数据仓库。支持调度和监控管道执行。",
      "difficulty": "easy"
    },
    {
      "id": "q34",
      "domain": 4,
      "question": "使用Azure CLI管理Azure SQL Database时，如何查看数据库的当前服务层级？",
      "options": {
        "A": "az sql db list",
        "B": "az sql db show",
        "C": "az sql db tier",
        "D": "az sql db get-tier"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "az sql db show命令显示数据库的详细信息，包括服务层级(edition)、性能级别(requestedServiceObjectiveName)、大小等。输出为JSON格式，可以使用--output参数更改输出格式。",
      "difficulty": "easy"
    },
    {
      "id": "q35",
      "domain": 5,
      "question": "Azure SQL Database的长期保留(LTR)备份存储在哪里？",
      "options": {
        "A": "与数据库相同的存储账户",
        "B": "单独的Azure Blob存储(用户不可直接访问)",
        "C": "用户指定的存储账户",
        "D": "Azure文件存储"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "LTR备份存储在Azure管理的Blob存储中，用户无法直接访问这些存储账户。可以通过Azure门户、PowerShell或CLI配置LTR策略和执行还原。备份存储成本单独计费。",
      "difficulty": "medium"
    },
    {
      "id": "q36",
      "domain": 5,
      "question": "在Azure SQL Database故障转移组中，当主区域恢复后，如何将数据库返回到原始主区域？",
      "options": {
        "A": "自动发生",
        "B": "执行另一次计划内故障转移",
        "C": "删除并重新创建故障转移组",
        "D": "联系Microsoft支持"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "故障转移后，当原始主区域恢复时，可以执行另一次计划内故障转移将数据库返回。这种\"故障回复\"操作与故障转移相同，只是方向相反。应该在低峰期执行以最小化对应用程序的影响。",
      "difficulty": "medium"
    },
    {
      "id": "q37",
      "domain": 1,
      "question": "配置Azure SQL Managed Instance时，什么是虚拟集群？",
      "options": {
        "A": "用户创建的资源组",
        "B": "Azure自动创建的用于托管Managed Instance的基础设施",
        "C": "用户管理的虚拟机",
        "D": "Azure Kubernetes集群"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "虚拟集群是Azure在子网中自动创建的隔离计算集群，用于托管Managed Instance。它管理底层基础设施，包括虚拟机、存储和网络。用户无需直接管理虚拟集群，但需要为其保留足够的子网地址空间。",
      "difficulty": "medium"
    },
    {
      "id": "q38",
      "domain": 2,
      "question": "Azure SQL Database的分类账(Ledger)功能提供什么安全能力？",
      "options": {
        "A": "数据加密",
        "B": "篡改证据和数据完整性验证",
        "C": "访问控制",
        "D": "备份加速"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "分类账功能为数据库提供加密证据，证明数据未被篡改。它维护所有更改的加密哈希链，可以验证数据完整性。这对于审计、合规和需要证明数据未被更改的场景很有价值。",
      "difficulty": "hard"
    },
    {
      "id": "q39",
      "domain": 3,
      "question": "Azure SQL Database的智能查询处理(Intelligent Query Processing)包含哪些功能？（选择两项）",
      "options": {
        "A": "自适应连接",
        "B": "表变量延迟编译",
        "C": "透明数据加密",
        "D": "异地复制"
      },
      "answer": ["A", "B"],
      "answerType": "multiple",
      "explanation": "智能查询处理是一组自动优化功能，包括：自适应连接(根据实际行数选择连接类型)、批处理模式内存授予反馈、表变量延迟编译等。这些功能自动提高查询性能，无需修改代码。",
      "difficulty": "hard"
    },
    {
      "id": "q40",
      "domain": 5,
      "question": "Azure SQL Database的可用性SLA是多少？",
      "options": {
        "A": "99.9%",
        "B": "99.95%",
        "C": "99.99%",
        "D": "100%"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "Azure SQL Database的高级和业务关键服务层级提供99.99%的可用性SLA。启用区域冗余配置的通用服务层级也可以达到99.99%。标准的通用服务层级SLA为99.99%。基本和标准层级SLA较低。",
      "difficulty": "easy"
    }
  ]
}
