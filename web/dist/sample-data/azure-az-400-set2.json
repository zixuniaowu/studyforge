{
  "exam": {
    "id": "azure-az-400-set2",
    "name": "Azure AZ-400 DevOps工程师专家模拟考试 #2",
    "code": "AZ-400",
    "provider": "Azure",
    "language": "zh-CN",
    "description": "Microsoft Azure DevOps Engineer Expert认证考试模拟题，涵盖DevOps流程配置、源代码控制设计、构建发布管道、安全合规计划和监控策略等核心领域",
    "totalQuestions": 40,
    "passingScore": 70,
    "examTime": 150,
    "domains": [
      {"id": 1, "name": "配置流程和通信 (Configure processes and communications)", "weight": 13},
      {"id": 2, "name": "设计和实施源代码控制 (Design and implement source control)", "weight": 18},
      {"id": 3, "name": "设计和实施构建发布管道 (Design and implement build and release pipelines)", "weight": 42},
      {"id": 4, "name": "制定安全和合规计划 (Develop a security and compliance plan)", "weight": 13},
      {"id": 5, "name": "实施监控策略 (Implement an instrumentation strategy)", "weight": 14}
    ],
    "tags": ["Azure", "AZ-400", "DevOps", "认证考试", "CI/CD"]
  },
  "questions": [
    {"id": "q1", "domain": 3, "question": "团队需要使用Terraform管理Azure基础设施，并将状态文件安全存储。最佳实践是什么？", "options": {"A": "将状态文件存储在Git仓库", "B": "使用Azure Storage Account作为远程后端", "C": "每个开发人员本地存储状态", "D": "不使用状态文件"}, "answer": "B", "answerType": "single", "explanation": "使用Azure Storage Account作为Terraform远程后端可以安全存储状态文件、启用状态锁定防止并发修改、共享状态给团队成员。Storage Account支持加密和访问控制，是IaC的最佳实践。", "difficulty": "medium"},
    {"id": "q2", "domain": 3, "question": "在Azure Pipelines中，需要在YAML文件中引用变量组中的机密变量。正确的方式是什么？", "options": {"A": "直接在YAML中定义机密", "B": "使用group关键字引用变量组", "C": "使用环境变量", "D": "硬编码值"}, "answer": "B", "answerType": "single", "explanation": "使用variables块中的group关键字可以引用变量组。例如：variables: - group: my-variable-group。变量组可以链接到Azure Key Vault，安全管理机密，在管道日志中自动遮蔽敏感值。", "difficulty": "easy"},
    {"id": "q3", "domain": 2, "question": "Git仓库变得很大，每次拉取都很慢。应该采取什么措施来改善性能？", "options": {"A": "删除所有历史记录", "B": "使用Git LFS处理大文件并清理历史", "C": "创建新仓库", "D": "增加服务器容量"}, "answer": "B", "answerType": "single", "explanation": "Git LFS可以将大文件(如图像、二进制文件)移出Git历史到单独存储。可以使用BFG Repo-Cleaner清理历史中的大文件。这组合方案显著减少仓库大小和克隆时间。", "difficulty": "medium"},
    {"id": "q4", "domain": 3, "question": "需要在Azure Pipelines中运行需要访问Azure资源的脚本。如何安全地进行身份验证？", "options": {"A": "在脚本中硬编码凭据", "B": "使用Azure服务连接(Service Connection)", "C": "使用个人访问令牌", "D": "使用明文密码"}, "answer": "B", "answerType": "single", "explanation": "Azure服务连接使用服务主体或托管标识进行身份验证，无需在管道中暴露凭据。Azure CLI和Azure PowerShell任务自动使用服务连接进行身份验证，安全访问Azure资源。", "difficulty": "easy"},
    {"id": "q5", "domain": 1, "question": "团队需要追踪每个用户故事的实现进度和关联的代码更改。应该使用什么功能？", "options": {"A": "Wiki", "B": "工作项链接(Work item linking)", "C": "仪表板", "D": "查询"}, "answer": "B", "answerType": "single", "explanation": "工作项链接允许将提交、拉取请求和分支关联到工作项。这提供了从需求到代码的可追溯性，可以在工作项中查看所有相关开发活动，便于审计和进度跟踪。", "difficulty": "easy"},
    {"id": "q6", "domain": 3, "question": "需要配置Azure Pipelines在部署失败时自动回滚到上一个成功版本。应该使用什么？", "options": {"A": "手动干预", "B": "部署策略with on failure设置", "C": "新建部署", "D": "忽略失败"}, "answer": "B", "answerType": "single", "explanation": "YAML管道支持deployment作业的策略定义，可以配置runOnce、rolling或canary策略。每种策略都支持on failure钩子，可以执行回滚逻辑，如重新部署上一个成功的版本。", "difficulty": "hard"},
    {"id": "q7", "domain": 4, "question": "需要确保第三方依赖项没有已知的安全漏洞。应该使用什么工具？", "options": {"A": "依赖项扫描(Dependency scanning)", "B": "代码格式化", "C": "压力测试", "D": "UI测试"}, "answer": "A", "answerType": "single", "explanation": "依赖项扫描(也称SCA - 软件组成分析)检查项目依赖的第三方库是否有已知漏洞。工具如WhiteSource、Snyk或GitHub Dependabot可以集成到CI管道中，自动检测和报告漏洞。", "difficulty": "easy"},
    {"id": "q8", "domain": 3, "question": "在多阶段管道中，需要在部署阶段之前等待手动审批。如何在YAML中实现？", "options": {"A": "使用environment审批", "B": "使用变量", "C": "使用脚本暂停", "D": "使用注释"}, "answer": "A", "answerType": "single", "explanation": "在Azure DevOps中为环境配置审批检查。当管道中的deployment作业指定该环境时，执行会暂停等待审批。审批者可以在Azure DevOps门户中批准或拒绝，支持多审批者和超时配置。", "difficulty": "medium"},
    {"id": "q9", "domain": 5, "question": "需要监控应用程序的真实用户体验，包括页面加载时间和JavaScript错误。应该使用什么？", "options": {"A": "Azure Monitor日志", "B": "Application Insights客户端SDK", "C": "服务器端遥测", "D": "网络监控"}, "answer": "B", "answerType": "single", "explanation": "Application Insights JavaScript SDK(客户端SDK)收集浏览器端数据，包括页面加载时间、AJAX调用性能、JavaScript异常和用户行为。这提供了真实用户体验的洞察，补充服务器端监控。", "difficulty": "medium"},
    {"id": "q10", "domain": 3, "question": "需要创建可重用的管道组件，可以在多个项目中使用。应该使用什么？", "options": {"A": "YAML模板仓库", "B": "复制粘贴代码", "C": "手动配置", "D": "脚本文件"}, "answer": "A", "answerType": "single", "explanation": "YAML模板可以存储在单独的仓库中，通过resources引用。模板支持参数化，可以定义可重用的步骤、作业或完整管道。这实现了DevOps即代码的最佳实践和组织范围的标准化。", "difficulty": "medium"},
    {"id": "q11", "domain": 2, "question": "在Git中，需要将多个小提交合并为一个有意义的提交再合并到主分支。应该使用什么？", "options": {"A": "Git merge", "B": "Git squash merge", "C": "Git cherry-pick", "D": "Git reset"}, "answer": "B", "answerType": "single", "explanation": "Squash合并将特性分支的所有提交压缩成单个提交合并到目标分支。这保持主分支历史整洁，每个功能只有一个提交。Azure DevOps拉取请求支持squash合并选项。", "difficulty": "medium"},
    {"id": "q12", "domain": 3, "question": "需要在Azure Pipelines中实现特性开关(Feature Flags)来控制新功能的发布。应该使用什么服务？", "options": {"A": "Azure App Configuration", "B": "环境变量", "C": "代码注释", "D": "分支策略"}, "answer": "A", "answerType": "single", "explanation": "Azure App Configuration提供特性管理功能，支持特性开关、目标筛选器和百分比部署。应用程序可以动态检查特性状态，无需重新部署即可启用/禁用功能，实现渐进式发布和A/B测试。", "difficulty": "medium"},
    {"id": "q13", "domain": 4, "question": "团队需要实施代码签名以确保部署的代码未被篡改。应该使用什么？", "options": {"A": "Azure Key Vault证书", "B": "密码保护", "C": "防火墙", "D": "VPN"}, "answer": "A", "answerType": "single", "explanation": "Azure Key Vault可以存储代码签名证书。在CI管道中使用这些证书对构建产物进行数字签名。部署时验证签名确保代码完整性，防止供应链攻击和中间人篡改。", "difficulty": "hard"},
    {"id": "q14", "domain": 3, "question": "需要在Azure DevOps中配置构建代理自动扩展以处理高峰期负载。应该使用什么？", "options": {"A": "规模集代理(Scale Set Agents)", "B": "更多固定代理", "C": "手动添加代理", "D": "队列等待"}, "answer": "A", "answerType": "single", "explanation": "Azure虚拟机规模集代理(Scale Set Agents)根据挂起作业数量自动扩展和缩减代理。当有作业排队时创建新代理，空闲时删除代理。这优化了成本并确保构建不会因资源不足而延迟。", "difficulty": "hard"},
    {"id": "q15", "domain": 5, "question": "需要创建合成事务来监控关键业务流程(如登录、下单)的可用性。应该使用什么？", "options": {"A": "Application Insights可用性测试", "B": "日志查询", "C": "指标警报", "D": "实时指标"}, "answer": "A", "answerType": "single", "explanation": "Application Insights可用性测试支持URL ping测试和多步骤Web测试。可以模拟用户流程(登录、浏览、购买)，从全球多个位置定期运行。检测到失败时自动触发警报。", "difficulty": "medium"},
    {"id": "q16", "domain": 3, "question": "在Kubernetes中部署应用程序时，需要安全地管理配置和密钥。应该使用什么？", "options": {"A": "环境变量硬编码", "B": "ConfigMaps和Secrets结合Azure Key Vault", "C": "配置文件在镜像中", "D": "命令行参数"}, "answer": "B", "answerType": "single", "explanation": "Kubernetes ConfigMaps存储非敏感配置，Secrets存储敏感数据。结合Azure Key Vault Provider for Secrets Store CSI Driver，可以将Azure Key Vault中的密钥自动同步到Kubernetes Secrets，集中管理和轮换密钥。", "difficulty": "hard"},
    {"id": "q17", "domain": 1, "question": "团队需要可视化敏捷冲刺进度和剩余工作。应该使用什么Azure DevOps功能？", "options": {"A": "燃尽图(Burndown chart)", "B": "代码覆盖率报告", "C": "构建历史", "D": "部署状态"}, "answer": "A", "answerType": "single", "explanation": "Azure Boards的燃尽图显示冲刺期间剩余工作的趋势，帮助团队了解是否能按时完成。还可以查看燃起图、累积流图等。这些图表帮助团队监控进度并做出调整。", "difficulty": "easy"},
    {"id": "q18", "domain": 3, "question": "需要配置Azure Pipelines在Docker构建时使用多阶段构建以减小镜像大小。应该使用什么？", "options": {"A": "多个Dockerfile", "B": "多阶段Dockerfile", "C": "更大的基础镜像", "D": "禁用缓存"}, "answer": "B", "answerType": "single", "explanation": "多阶段Dockerfile允许在一个文件中定义多个构建阶段。编译阶段使用包含构建工具的镜像，最终阶段只复制必要的产物到精简的运行时镜像。这显著减小生产镜像大小和攻击面。", "difficulty": "medium"},
    {"id": "q19", "domain": 4, "question": "需要确保Azure DevOps组织符合SOC 2合规要求。应该检查什么？", "options": {"A": "Azure合规性文档和审计日志配置", "B": "代码行数", "C": "构建速度", "D": "代理数量"}, "answer": "A", "answerType": "single", "explanation": "Azure DevOps已获得SOC 2认证。为了满足组织的合规要求，需要正确配置审计日志、访问控制、数据保护设置。可以参考Microsoft Trust Center了解Azure DevOps的合规认证和最佳实践。", "difficulty": "medium"},
    {"id": "q20", "domain": 3, "question": "需要在CI管道中运行代码质量检查，包括代码异味、重复代码和复杂度分析。应该使用什么工具？", "options": {"A": "SonarQube/SonarCloud", "B": "单元测试", "C": "编译器", "D": "部署脚本"}, "answer": "A", "answerType": "single", "explanation": "SonarQube/SonarCloud提供全面的代码质量分析，检测代码异味、漏洞、重复代码和复杂度问题。可以设置质量门(Quality Gate)，在代码不满足标准时使构建失败，实现持续代码质量改进。", "difficulty": "medium"},
    {"id": "q21", "domain": 2, "question": "在Git中合并特性分支时遇到冲突。解决冲突的最佳实践是什么？", "options": {"A": "接受所有远程更改", "B": "仔细检查冲突文件，理解两边更改后手动合并", "C": "接受所有本地更改", "D": "删除冲突文件"}, "answer": "B", "answerType": "single", "explanation": "合并冲突表示同一代码位置有不兼容的更改。应该理解两边的修改意图，手动合并保留正确的逻辑。可以使用diff工具和代码审查帮助理解更改。盲目接受某一边可能丢失重要更改。", "difficulty": "easy"},
    {"id": "q22", "domain": 3, "question": "需要在Azure Pipelines中实现基础设施即代码(IaC)的测试。应该使用什么方法？", "options": {"A": "仅手动测试", "B": "使用Pester或Terratest进行自动化测试", "C": "跳过测试直接部署", "D": "代码审查足够"}, "answer": "B", "answerType": "single", "explanation": "IaC代码也需要测试。Pester(PowerShell)、Terratest(Terraform)等框架可以验证IaC逻辑、测试部署的基础设施是否符合预期。在CI管道中运行这些测试可以在部署前发现问题。", "difficulty": "hard"},
    {"id": "q23", "domain": 5, "question": "需要收集应用程序的自定义遥测数据并发送到Application Insights。应该使用什么？", "options": {"A": "Console.WriteLine", "B": "TelemetryClient API", "C": "日志文件", "D": "数据库"}, "answer": "B", "answerType": "single", "explanation": "Application Insights SDK提供TelemetryClient类，用于发送自定义事件(TrackEvent)、指标(TrackMetric)、异常(TrackException)和依赖项(TrackDependency)。这些数据与自动收集的遥测一起分析。", "difficulty": "medium"},
    {"id": "q24", "domain": 3, "question": "需要在部署后自动执行健康检查，确保应用程序正常运行。应该使用什么？", "options": {"A": "部署后门(Post-deployment gates)", "B": "忽略健康检查", "C": "手动测试", "D": "查看日志"}, "answer": "A", "answerType": "single", "explanation": "部署后门可以调用健康检查端点、Azure Monitor警报状态或自定义Azure Functions。只有所有检查通过，部署才被视为成功。如果检查失败，可以自动回滚或通知团队。", "difficulty": "medium"},
    {"id": "q25", "domain": 1, "question": "团队使用Scrum方法论，需要在Azure DevOps中管理产品待办列表和冲刺。应该使用什么？", "options": {"A": "Azure Repos", "B": "Azure Boards", "C": "Azure Pipelines", "D": "Azure Artifacts"}, "answer": "B", "answerType": "single", "explanation": "Azure Boards提供完整的敏捷项目管理功能，包括积压工作管理、冲刺规划、看板、燃尽图等。支持Scrum、Kanban和敏捷等预定义流程模板，可以自定义工作项类型和工作流。", "difficulty": "easy"},
    {"id": "q26", "domain": 3, "question": "需要在Azure Pipelines中使用私有NuGet源。应该如何配置？", "options": {"A": "在YAML中硬编码凭据", "B": "配置NuGet服务连接和nuget.config", "C": "只使用公共源", "D": "手动下载包"}, "answer": "B", "answerType": "single", "explanation": "创建Azure DevOps服务连接指向私有NuGet源。在管道中使用NuGetAuthenticate任务或配置nuget.config引用Azure Artifacts feed。这安全地管理认证，允许使用私有包而不暴露凭据。", "difficulty": "medium"},
    {"id": "q27", "domain": 4, "question": "需要限制谁可以修改生产环境的管道变量。应该配置什么？", "options": {"A": "变量组权限", "B": "所有人都可以编辑", "C": "不使用变量", "D": "在代码中硬编码"}, "answer": "A", "answerType": "single", "explanation": "变量组支持基于角色的访问控制(RBAC)。可以配置谁可以查看、使用或管理变量组。对于包含生产密钥的变量组，应该限制管理权限只给授权人员，使用权限可以更广泛。", "difficulty": "medium"},
    {"id": "q28", "domain": 3, "question": "在Azure Pipelines中，需要根据文件更改的路径来触发不同的构建逻辑。应该使用什么？", "options": {"A": "path filters在trigger中", "B": "手动选择", "C": "总是运行所有构建", "D": "禁用触发器"}, "answer": "A", "answerType": "single", "explanation": "trigger支持path include/exclude筛选器。例如，可以配置只有当src/folder下的文件更改时才触发构建，或排除文档更改。这优化了构建效率，避免不必要的构建运行。", "difficulty": "medium"},
    {"id": "q29", "domain": 5, "question": "需要在生产环境中进行A/B测试，比较不同版本的用户体验。应该使用什么？", "options": {"A": "特性标志和Application Insights", "B": "完全部署新版本", "C": "开发环境测试", "D": "代码审查"}, "answer": "A", "answerType": "single", "explanation": "结合Azure App Configuration的特性标志和Application Insights，可以将用户分组暴露到不同版本，收集用户行为和性能数据。Application Insights支持自定义属性来标识实验组，便于分析比较。", "difficulty": "hard"},
    {"id": "q30", "domain": 2, "question": "团队需要将多个Git仓库合并为一个单一仓库(monorepo)。应该考虑什么？", "options": {"A": "简单复制文件", "B": "保留提交历史的合并策略", "C": "删除所有历史", "D": "创建全新仓库"}, "answer": "B", "answerType": "single", "explanation": "合并仓库时应该保留提交历史以便追溯和审计。可以使用git filter-repo或类似工具重写历史将每个仓库移动到子目录，然后合并。也要考虑分支策略、权限和CI/CD配置的调整。", "difficulty": "hard"},
    {"id": "q31", "domain": 3, "question": "需要在Azure Pipelines中实现蓝绿部署，两个环境同时运行不同版本。应该使用什么Azure服务？", "options": {"A": "单个App Service", "B": "App Service部署槽", "C": "虚拟机", "D": "容器实例"}, "answer": "B", "answerType": "single", "explanation": "App Service部署槽允许创建staging和production等多个槽，各自运行不同版本。部署到staging槽，测试验证后与production槽交换。交换是瞬时的，如有问题可快速交换回去实现回滚。", "difficulty": "medium"},
    {"id": "q32", "domain": 4, "question": "需要确保CI/CD管道中使用的容器镜像来自受信任的注册表。应该实施什么？", "options": {"A": "容器镜像策略(Image policies)", "B": "任何镜像都可以", "C": "不使用容器", "D": "手动验证"}, "answer": "A", "answerType": "single", "explanation": "可以使用Azure Policy或Open Policy Agent(OPA)定义容器镜像策略，只允许来自特定注册表或经过签名验证的镜像。这防止使用未经审核的镜像，降低供应链攻击风险。", "difficulty": "hard"},
    {"id": "q33", "domain": 3, "question": "需要在Azure Pipelines中管理多个微服务的部署，每个服务有自己的生命周期。应该使用什么策略？", "options": {"A": "单个大管道", "B": "每个微服务独立管道，可选择依赖关系", "C": "手动部署每个服务", "D": "不使用管道"}, "answer": "B", "answerType": "single", "explanation": "微服务架构应该为每个服务创建独立的CI/CD管道，允许独立构建、测试和部署。可以使用pipeline resources定义服务间依赖，或使用环境和deployment作业编排跨服务部署。", "difficulty": "medium"},
    {"id": "q34", "domain": 5, "question": "需要将Azure Monitor日志和Application Insights数据导出到长期存储进行合规归档。应该使用什么？", "options": {"A": "持续导出到Storage Account", "B": "只保留30天", "C": "手动导出", "D": "打印日志"}, "answer": "A", "answerType": "single", "explanation": "Azure Monitor支持诊断设置将日志流式传输到Storage Account、Event Hubs或Log Analytics。Application Insights支持持续导出。这允许长期保留数据，满足合规要求，并可使用其他工具分析历史数据。", "difficulty": "medium"},
    {"id": "q35", "domain": 1, "question": "团队需要在Azure DevOps中创建可重用的工作项模板，用于常见任务类型。应该使用什么？", "options": {"A": "工作项模板", "B": "复制粘贴", "C": "每次手动填写", "D": "不使用工作项"}, "answer": "A", "answerType": "single", "explanation": "Azure Boards支持创建工作项模板，预定义字段值、标签和描述。团队成员可以使用模板快速创建标准化的工作项，确保一致性并节省时间。模板可以在团队或项目级别共享。", "difficulty": "easy"},
    {"id": "q36", "domain": 3, "question": "需要在Azure Pipelines中使用Helm部署应用程序到AKS。应该使用什么任务？", "options": {"A": "HelmDeploy任务", "B": "PowerShell脚本", "C": "手动kubectl", "D": "Azure门户"}, "answer": "A", "answerType": "single", "explanation": "Azure Pipelines提供HelmDeploy任务(Helm@0)，支持helm install、upgrade、rollback等命令。任务与AKS服务连接集成，安全地进行身份验证。可以传递values文件和覆盖值进行配置。", "difficulty": "medium"},
    {"id": "q37", "domain": 4, "question": "需要在管道中扫描Infrastructure as Code模板(如ARM、Terraform)的安全问题。应该使用什么？", "options": {"A": "Checkov或tfsec", "B": "语法检查足够", "C": "不扫描", "D": "手动审查"}, "answer": "A", "answerType": "single", "explanation": "Checkov和tfsec是开源IaC安全扫描工具，检测云资源的安全配置问题(如公开存储桶、未加密数据库)。可以集成到CI管道中，在部署前发现和修复安全问题。", "difficulty": "medium"},
    {"id": "q38", "domain": 3, "question": "需要配置Azure Pipelines在周末不运行计划构建，只在工作日运行。应该如何配置？", "options": {"A": "使用schedules和always: false配合branch筛选", "B": "手动禁用", "C": "每天手动触发", "D": "不使用计划"}, "answer": "A", "answerType": "single", "explanation": "YAML schedules支持cron表达式定义运行时间。例如：cron: '0 0 * * 1-5'表示周一到周五运行。可以配置多个计划，always: false表示只在有代码更改时运行计划构建。", "difficulty": "medium"},
    {"id": "q39", "domain": 2, "question": "在分布式团队中，需要确保所有开发人员使用一致的代码格式和提交消息规范。应该使用什么？", "options": {"A": "EditorConfig和commitlint with Git hooks", "B": "口头约定", "C": "定期手动检查", "D": "不需要规范"}, "answer": "A", "answerType": "single", "explanation": "EditorConfig定义跨编辑器的代码格式规则。commitlint验证提交消息格式。可以使用Git hooks(如Husky)在提交前自动检查，确保所有代码符合规范。这在CI中也应该验证。", "difficulty": "medium"},
    {"id": "q40", "domain": 5, "question": "需要实现基于日志的告警，当特定错误模式在一定时间内出现多次时触发通知。应该使用什么？", "options": {"A": "Azure Monitor日志警报(Log alerts)", "B": "手动查看日志", "C": "指标警报", "D": "不设置警报"}, "answer": "A", "answerType": "single", "explanation": "Azure Monitor日志警报使用Kusto查询语言(KQL)分析日志数据。可以查询特定错误模式的出现次数，设置阈值触发警报。支持聚合时间窗口、告警频率和操作组通知配置。", "difficulty": "medium"}
  ]
}
