{
  "exam": {
    "id": "dify-llmops-set3",
    "name": "Dify LLMOps 模拟考试 #3",
    "code": "DIFY-OPS",
    "provider": "Dify",
    "language": "zh-CN",
    "description": "Dify LLMOps 运维认证 - 第3套",
    "totalQuestions": 50,
    "passingScore": 70,
    "examTime": 90,
    "domains": [
      { "id": 1, "name": "Enterprise Deployment", "weight": 25 },
      { "id": 2, "name": "Model Management", "weight": 20 },
      { "id": 3, "name": "Performance & Monitoring", "weight": 30 },
      { "id": 4, "name": "Security & API", "weight": 25 }
    ],
    "tags": ["Dify", "LLMOps", "DevOps", "认证考试"]
  },
  "questions": [
    {"id": "q1", "domain": 1, "question": "在 Dify 企业部署中，如何实现\"零停机升级\"？", "options": {"A": "停机后快速升级", "B": "使用滚动更新或蓝绿部署策略", "C": "在维护窗口升级", "D": "不支持零停机"}, "answer": "B", "answerType": "single", "explanation": "零停机升级实现：\n- Kubernetes 滚动更新\n- 蓝绿部署切换流量\n- 金丝雀发布逐步验证\n- 配合健康检查确保服务可用", "difficulty": "hard"},
    {"id": "q2", "domain": 1, "question": "Dify 的\"Sandbox 代码执行环境\"如何保证安全？", "options": {"A": "信任所有代码", "B": "在隔离容器中运行，限制资源和网络访问", "C": "手动审核代码", "D": "不执行用户代码"}, "answer": "B", "answerType": "single", "explanation": "Sandbox 安全机制：\n- Docker 容器隔离\n- 资源配额限制（CPU/内存）\n- 网络访问控制\n- 超时自动终止", "difficulty": "medium"},
    {"id": "q3", "domain": 1, "question": "如何配置 Dify 的\"外部向量数据库\"连接？", "options": {"A": "只能用内置向量库", "B": "在环境变量中配置向量数据库连接信息", "C": "修改源代码", "D": "通过 Web 界面配置"}, "answer": "B", "answerType": "single", "explanation": "外部向量数据库配置：\n- 支持 Qdrant、Weaviate、Pinecone 等\n- 在 .env 中配置连接地址和认证\n- 配置集合/索引名称\n- 测试连接确保可用", "difficulty": "medium"},
    {"id": "q4", "domain": 1, "question": "Dify 生产环境如何实现\"日志集中管理\"？", "options": {"A": "查看本地日志", "B": "配置日志输出到 ELK/Loki 等集中式日志系统", "C": "手动收集日志", "D": "不支持日志管理"}, "answer": "B", "answerType": "single", "explanation": "日志集中管理：\n- 配置日志输出到 stdout\n- 使用 Fluentd/Filebeat 收集\n- 发送到 ELK 或 Loki\n- 支持日志搜索和分析", "difficulty": "medium"},
    {"id": "q5", "domain": 1, "question": "如何配置 Dify 的\"定时任务调度\"？", "options": {"A": "使用外部 cron", "B": "通过 Celery Beat 配置定时任务", "C": "不支持定时任务", "D": "手动触发"}, "answer": "B", "answerType": "single", "explanation": "定时任务配置：\n- Celery Beat 调度定时任务\n- 配置任务周期和参数\n- Worker 执行任务\n- 监控任务执行状态", "difficulty": "medium"},
    {"id": "q6", "domain": 2, "question": "如何在 Dify 中实现\"模型调用链路追踪\"？", "options": {"A": "无法追踪", "B": "集成 OpenTelemetry 追踪 API 调用全链路", "C": "查看日志", "D": "手动记录"}, "answer": "B", "answerType": "single", "explanation": "调用链路追踪：\n- 集成 OpenTelemetry SDK\n- 记录每次模型调用\n- 追踪延迟和错误\n- 可视化调用链路", "difficulty": "hard"},
    {"id": "q7", "domain": 2, "question": "Dify 中如何配置\"模型调用超时\"？", "options": {"A": "无法配置", "B": "在模型设置中配置超时时间", "C": "使用默认超时", "D": "在代码中硬编码"}, "answer": "B", "answerType": "single", "explanation": "超时配置：\n- 在模型供应商设置中配置\n- 设置合理的超时时间\n- 不同模型可以有不同超时\n- 超时后返回错误", "difficulty": "easy"},
    {"id": "q8", "domain": 2, "question": "如何在 Dify 中实现\"模型输出格式验证\"？", "options": {"A": "不验证输出", "B": "在工作流中添加输出格式检查节点", "C": "信任模型输出", "D": "手动检查"}, "answer": "B", "answerType": "single", "explanation": "输出格式验证：\n- 使用代码节点验证 JSON 格式\n- 检查必填字段是否存在\n- 验证数据类型\n- 格式错误时重试或告警", "difficulty": "medium"},
    {"id": "q9", "domain": 2, "question": "Dify 中如何管理\"模型 API 密钥轮换\"？", "options": {"A": "手动更新密钥", "B": "支持多密钥配置和自动轮换", "C": "使用固定密钥", "D": "不支持密钥管理"}, "answer": "B", "answerType": "single", "explanation": "API 密钥轮换：\n- 配置多个 API 密钥\n- 启用负载均衡轮询\n- 支持添加新密钥无需重启\n- 自动处理密钥过期", "difficulty": "medium"},
    {"id": "q10", "domain": 2, "question": "如何在 Dify 中配置\"模型降级策略\"？", "options": {"A": "不支持降级", "B": "配置备用模型，主模型失败时自动切换", "C": "手动切换", "D": "停止服务"}, "answer": "B", "answerType": "single", "explanation": "模型降级策略：\n- 配置主模型和备用模型\n- 检测到错误时自动切换\n- 可以配置切换条件\n- 记录降级事件", "difficulty": "medium"},
    {"id": "q11", "domain": 3, "question": "Dify 中如何实现\"API 调用指标监控\"？", "options": {"A": "不支持监控", "B": "暴露 Prometheus 指标并配置告警", "C": "手动统计", "D": "查看日志估算"}, "answer": "B", "answerType": "single", "explanation": "API 指标监控：\n- 暴露 Prometheus 格式指标\n- 记录 QPS、延迟、错误率\n- 配置 Grafana 仪表板\n- 设置告警阈值", "difficulty": "medium"},
    {"id": "q12", "domain": 3, "question": "如何优化 Dify 的\"冷启动时间\"？", "options": {"A": "无法优化", "B": "使用预热机制和连接池", "C": "增加服务器", "D": "减少功能"}, "answer": "B", "answerType": "single", "explanation": "冷启动优化：\n- 应用预热探针\n- 数据库连接池预建立\n- 模型连接保持\n- 缓存预热", "difficulty": "medium"},
    {"id": "q13", "domain": 3, "question": "Dify 中如何实现\"请求限流熔断\"？", "options": {"A": "不限制请求", "B": "配置限流规则和熔断阈值", "C": "手动控制", "D": "依赖外部网关"}, "answer": "B", "answerType": "single", "explanation": "限流熔断实现：\n- 配置每分钟/每秒请求限制\n- 设置熔断错误率阈值\n- 超过限制返回 429\n- 熔断后快速失败", "difficulty": "hard"},
    {"id": "q14", "domain": 3, "question": "如何分析 Dify 应用的\"Token 消耗热点\"？", "options": {"A": "无法分析", "B": "通过监控数据找到高消耗的用户或功能", "C": "猜测", "D": "询问用户"}, "answer": "B", "answerType": "single", "explanation": "Token 消耗分析：\n- 按用户/应用统计消耗\n- 识别高消耗场景\n- 分析 Prompt 效率\n- 优化高消耗功能", "difficulty": "medium"},
    {"id": "q15", "domain": 3, "question": "Dify 中如何实现\"自动扩缩容\"？", "options": {"A": "手动调整实例", "B": "结合 Kubernetes HPA 基于指标自动扩缩", "C": "固定实例数", "D": "不支持扩缩容"}, "answer": "B", "answerType": "single", "explanation": "自动扩缩容：\n- Kubernetes HPA 配置\n- 基于 CPU/内存/自定义指标\n- 设置最小和最大副本数\n- 响应负载变化", "difficulty": "hard"},
    {"id": "q16", "domain": 4, "question": "Dify 中如何实现\"API 调用审计日志\"？", "options": {"A": "不记录审计", "B": "记录所有 API 调用的详细信息", "C": "只记录错误", "D": "可选记录"}, "answer": "B", "answerType": "single", "explanation": "API 审计日志：\n- 记录调用者身份\n- 记录请求和响应\n- 记录时间和 IP\n- 支持合规审计", "difficulty": "medium"},
    {"id": "q17", "domain": 4, "question": "如何保护 Dify 中存储的\"敏感配置信息\"？", "options": {"A": "明文存储", "B": "使用加密存储和密钥管理服务", "C": "不存储敏感信息", "D": "手动加密"}, "answer": "B", "answerType": "single", "explanation": "敏感配置保护：\n- 使用 Kubernetes Secret\n- 集成 Vault 等密钥管理\n- 数据库字段加密\n- 访问控制和审计", "difficulty": "medium"},
    {"id": "q18", "domain": 4, "question": "Dify 如何实现\"API 版本管理\"？", "options": {"A": "不支持版本管理", "B": "通过 URL 路径或 Header 区分 API 版本", "C": "每个版本单独部署", "D": "自动选择版本"}, "answer": "B", "answerType": "single", "explanation": "API 版本管理：\n- URL 路径包含版本号（/v1/）\n- Header 指定版本\n- 保持向后兼容\n- 文档说明版本差异", "difficulty": "medium"},
    {"id": "q19", "domain": 4, "question": "如何在 Dify 中实现\"IP 访问控制\"？", "options": {"A": "不支持 IP 控制", "B": "在网关或反向代理层配置白名单/黑名单", "C": "在 Dify 中配置", "D": "修改防火墙"}, "answer": "B", "answerType": "single", "explanation": "IP 访问控制：\n- 反向代理（Nginx）配置\n- API 网关层控制\n- 云安全组配置\n- 灵活管理访问来源", "difficulty": "medium"},
    {"id": "q20", "domain": 4, "question": "Dify 如何处理\"跨站请求伪造(CSRF)\"？", "options": {"A": "不防护 CSRF", "B": "使用 CSRF Token 验证", "C": "禁用跨域", "D": "只允许 GET 请求"}, "answer": "B", "answerType": "single", "explanation": "CSRF 防护：\n- 生成和验证 CSRF Token\n- SameSite Cookie 属性\n- 验证 Referer/Origin\n- API 使用 Token 认证", "difficulty": "medium"},
    {"id": "q21", "domain": 1, "question": "Dify 如何实现\"多环境配置管理\"？", "options": {"A": "每个环境单独修改", "B": "使用环境变量和配置文件区分环境", "C": "硬编码配置", "D": "不支持多环境"}, "answer": "B", "answerType": "single", "explanation": "多环境配置：\n- 使用不同的 .env 文件\n- Kubernetes ConfigMap/Secret\n- 环境变量覆盖\n- 配置中心管理", "difficulty": "medium"},
    {"id": "q22", "domain": 1, "question": "如何配置 Dify 的\"反向代理\"设置？", "options": {"A": "不需要反向代理", "B": "配置 Nginx 处理 SSL 终止和负载均衡", "C": "使用内置代理", "D": "直接暴露服务"}, "answer": "B", "answerType": "single", "explanation": "反向代理配置：\n- Nginx 处理 HTTPS/SSL\n- 负载均衡多个后端\n- 静态资源缓存\n- 配置访问日志", "difficulty": "medium"},
    {"id": "q23", "domain": 1, "question": "Dify 的\"Worker 服务\"如何扩展？", "options": {"A": "无法扩展", "B": "增加 Worker 副本数处理更多任务", "C": "增加 API 服务", "D": "优化代码"}, "answer": "B", "answerType": "single", "explanation": "Worker 扩展：\n- 增加 Celery Worker 实例\n- 配置并发任务数\n- 调整任务队列配置\n- 监控队列积压", "difficulty": "medium"},
    {"id": "q24", "domain": 1, "question": "如何实现 Dify 的\"数据库高可用\"？", "options": {"A": "单实例足够", "B": "配置 PostgreSQL 主从复制和自动故障转移", "C": "定期备份", "D": "使用内存数据库"}, "answer": "B", "answerType": "single", "explanation": "数据库高可用：\n- 主从流复制\n- 自动故障转移（Patroni）\n- 连接池配置\n- 定期备份验证", "difficulty": "hard"},
    {"id": "q25", "domain": 1, "question": "Dify 如何处理\"静态资源部署\"？", "options": {"A": "和 API 一起部署", "B": "分离部署，使用 CDN 加速", "C": "不使用静态资源", "D": "本地存储"}, "answer": "B", "answerType": "single", "explanation": "静态资源部署：\n- Web 前端独立部署\n- 使用 CDN 加速\n- 配置缓存策略\n- 支持多区域分发", "difficulty": "medium"},
    {"id": "q26", "domain": 2, "question": "如何在 Dify 中实现\"模型 A/B 测试\"？", "options": {"A": "手动切换", "B": "配置流量分配比例进行对比测试", "C": "只用一个模型", "D": "不支持测试"}, "answer": "B", "answerType": "single", "explanation": "模型 A/B 测试：\n- 配置多个模型版本\n- 设置流量分配比例\n- 收集对比指标\n- 选择最优模型", "difficulty": "medium"},
    {"id": "q27", "domain": 2, "question": "Dify 中如何处理\"模型上下文溢出\"？", "options": {"A": "报错停止", "B": "自动截断或提示用户优化", "C": "忽略溢出", "D": "强制发送"}, "answer": "B", "answerType": "single", "explanation": "上下文溢出处理：\n- 检测是否超过限制\n- 自动截断历史消息\n- 提示用户优化 Prompt\n- 推荐合适的模型", "difficulty": "medium"},
    {"id": "q28", "domain": 2, "question": "如何配置 Dify 的\"模型计费参数\"？", "options": {"A": "使用默认价格", "B": "为每个模型配置输入/输出单价", "C": "不关心计费", "D": "使用提供商价格"}, "answer": "B", "answerType": "single", "explanation": "计费参数配置：\n- 配置每千 Token 价格\n- 区分输入和输出价格\n- 支持不同货币\n- 用于成本估算", "difficulty": "easy"},
    {"id": "q29", "domain": 2, "question": "Dify 中如何实现\"模型响应缓存\"？", "options": {"A": "不缓存响应", "B": "对相同查询缓存响应结果", "C": "全部缓存", "D": "用户自己缓存"}, "answer": "B", "answerType": "single", "explanation": "响应缓存实现：\n- 基于查询哈希缓存\n- 配置缓存 TTL\n- 减少重复调用\n- 节省成本", "difficulty": "medium"},
    {"id": "q30", "domain": 2, "question": "如何在 Dify 中管理\"Embedding 模型选择\"？", "options": {"A": "固定使用一个", "B": "根据场景选择合适的 Embedding 模型", "C": "随机选择", "D": "不使用 Embedding"}, "answer": "B", "answerType": "single", "explanation": "Embedding 模型选择：\n- 考虑语言支持\n- 评估向量维度\n- 权衡成本和效果\n- 测试检索准确率", "difficulty": "medium"},
    {"id": "q31", "domain": 3, "question": "Dify 中如何实现\"分布式追踪\"？", "options": {"A": "单机日志", "B": "集成 Jaeger/Zipkin 追踪跨服务调用", "C": "手动关联", "D": "不支持追踪"}, "answer": "B", "answerType": "single", "explanation": "分布式追踪：\n- 集成 OpenTelemetry\n- 传递 Trace ID\n- 收集 Span 数据\n- Jaeger 可视化", "difficulty": "hard"},
    {"id": "q32", "domain": 3, "question": "如何监控 Dify 的\"内存泄漏\"？", "options": {"A": "重启解决", "B": "监控内存使用趋势并分析", "C": "不监控内存", "D": "增加内存"}, "answer": "B", "answerType": "single", "explanation": "内存泄漏监控：\n- 持续监控内存使用\n- 分析增长趋势\n- 使用 profiler 定位\n- 及时修复泄漏", "difficulty": "hard"},
    {"id": "q33", "domain": 3, "question": "Dify 中如何优化\"数据库查询性能\"？", "options": {"A": "增加硬件", "B": "优化查询语句和添加适当索引", "C": "减少数据", "D": "使用缓存替代"}, "answer": "B", "answerType": "single", "explanation": "查询性能优化：\n- 分析慢查询日志\n- 添加必要索引\n- 优化 SQL 语句\n- 使用查询计划分析", "difficulty": "medium"},
    {"id": "q34", "domain": 3, "question": "如何配置 Dify 的\"任务队列监控\"？", "options": {"A": "不监控队列", "B": "监控队列长度和处理速度", "C": "手动检查", "D": "查看日志"}, "answer": "B", "answerType": "single", "explanation": "队列监控配置：\n- 监控 Celery 队列长度\n- 统计任务处理速度\n- 检测任务失败率\n- 设置积压告警", "difficulty": "medium"},
    {"id": "q35", "domain": 3, "question": "Dify 中如何实现\"错误聚合分析\"？", "options": {"A": "逐条查看错误", "B": "使用错误追踪服务聚合相似错误", "C": "忽略错误", "D": "手动分类"}, "answer": "B", "answerType": "single", "explanation": "错误聚合分析：\n- 集成 Sentry 等服务\n- 自动聚合相似错误\n- 统计错误频率\n- 优先处理高频问题", "difficulty": "medium"},
    {"id": "q36", "domain": 4, "question": "Dify 如何实现\"数据加密传输\"？", "options": {"A": "HTTP 明文传输", "B": "全程使用 HTTPS/TLS 加密", "C": "应用层加密", "D": "可选加密"}, "answer": "B", "answerType": "single", "explanation": "数据加密传输：\n- 配置 TLS 证书\n- 强制 HTTPS\n- API 通信加密\n- 数据库连接加密", "difficulty": "medium"},
    {"id": "q37", "domain": 4, "question": "如何实现 Dify 的\"会话管理安全\"？", "options": {"A": "无安全措施", "B": "安全的会话令牌和过期机制", "C": "明文存储会话", "D": "永不过期"}, "answer": "B", "answerType": "single", "explanation": "会话管理安全：\n- 安全生成会话令牌\n- 配置合理过期时间\n- HttpOnly Cookie\n- 支持强制注销", "difficulty": "medium"},
    {"id": "q38", "domain": 4, "question": "Dify 中如何处理\"输入验证和清洗\"？", "options": {"A": "信任所有输入", "B": "验证输入格式并过滤危险内容", "C": "只验证格式", "D": "不验证"}, "answer": "B", "answerType": "single", "explanation": "输入验证清洗：\n- 验证输入格式和类型\n- 过滤 XSS/注入内容\n- 限制输入长度\n- 记录异常输入", "difficulty": "medium"},
    {"id": "q39", "domain": 4, "question": "如何配置 Dify 的\"访问频率限制\"？", "options": {"A": "不限制频率", "B": "配置每分钟/每小时的请求上限", "C": "依赖外部限制", "D": "手动封禁"}, "answer": "B", "answerType": "single", "explanation": "频率限制配置：\n- 按 API Key/IP 限制\n- 配置时间窗口和上限\n- 超限返回 429\n- 支持白名单豁免", "difficulty": "medium"},
    {"id": "q40", "domain": 4, "question": "Dify 如何实现\"安全的文件上传\"？", "options": {"A": "接受所有文件", "B": "验证文件类型、大小并安全存储", "C": "只限制大小", "D": "禁止上传"}, "answer": "B", "answerType": "single", "explanation": "文件上传安全：\n- 验证文件类型（白名单）\n- 限制文件大小\n- 病毒扫描\n- 安全存储路径", "difficulty": "medium"},
    {"id": "q41", "domain": 1, "question": "如何配置 Dify 的\"健康检查端点\"？", "options": {"A": "没有健康检查", "B": "使用内置 /health 端点进行探测", "C": "自己开发", "D": "ping 服务"}, "answer": "B", "answerType": "single", "explanation": "健康检查配置：\n- 内置 /health 端点\n- 检查数据库连接\n- 检查 Redis 连接\n- 用于负载均衡探测", "difficulty": "easy"},
    {"id": "q42", "domain": 1, "question": "Dify 如何处理\"配置热更新\"？", "options": {"A": "必须重启", "B": "支持部分配置热更新无需重启", "C": "不支持更新", "D": "全部热更新"}, "answer": "B", "answerType": "single", "explanation": "配置热更新：\n- 模型配置可以热更新\n- 应用配置即时生效\n- 系统配置需重启\n- 使用配置中心", "difficulty": "medium"},
    {"id": "q43", "domain": 2, "question": "如何在 Dify 中配置\"模型请求重试\"？", "options": {"A": "不重试", "B": "配置重试次数和退避策略", "C": "手动重试", "D": "无限重试"}, "answer": "B", "answerType": "single", "explanation": "请求重试配置：\n- 设置最大重试次数\n- 配置退避策略（指数退避）\n- 区分可重试和不可重试错误\n- 记录重试日志", "difficulty": "medium"},
    {"id": "q44", "domain": 2, "question": "Dify 中如何处理\"模型并发限制\"？", "options": {"A": "不限制并发", "B": "使用信号量或队列控制并发调用数", "C": "单线程调用", "D": "依赖模型限制"}, "answer": "B", "answerType": "single", "explanation": "并发限制处理：\n- 配置最大并发数\n- 使用信号量控制\n- 请求排队机制\n- 避免触发提供商限制", "difficulty": "medium"},
    {"id": "q45", "domain": 3, "question": "如何配置 Dify 的\"告警通知\"？", "options": {"A": "不支持告警", "B": "配置告警规则和通知渠道", "C": "手动监控", "D": "邮件通知"}, "answer": "B", "answerType": "single", "explanation": "告警通知配置：\n- 配置告警规则（阈值）\n- 设置通知渠道（邮件/Slack/钉钉）\n- 告警级别分类\n- 告警静默和升级", "difficulty": "medium"},
    {"id": "q46", "domain": 3, "question": "Dify 中如何实现\"用户行为分析\"？", "options": {"A": "不分析行为", "B": "收集使用数据进行分析", "C": "手动统计", "D": "问卷调查"}, "answer": "B", "answerType": "single", "explanation": "用户行为分析：\n- 记录用户操作日志\n- 分析功能使用频率\n- 追踪用户路径\n- 优化产品体验", "difficulty": "medium"},
    {"id": "q47", "domain": 4, "question": "如何实现 Dify 的\"数据备份验证\"？", "options": {"A": "只备份不验证", "B": "定期恢复测试验证备份有效性", "C": "检查文件大小", "D": "人工确认"}, "answer": "B", "answerType": "single", "explanation": "备份验证方法：\n- 定期执行恢复测试\n- 验证数据完整性\n- 检查恢复时间\n- 记录验证结果", "difficulty": "hard"},
    {"id": "q48", "domain": 4, "question": "Dify 如何处理\"敏感数据脱敏\"？", "options": {"A": "不脱敏", "B": "日志和显示中自动脱敏敏感信息", "C": "手动脱敏", "D": "不存储敏感数据"}, "answer": "B", "answerType": "single", "explanation": "敏感数据脱敏：\n- API 密钥脱敏显示\n- 日志中过滤敏感信息\n- 用户数据脱敏\n- 配置脱敏规则", "difficulty": "medium"},
    {"id": "q49", "domain": 1, "question": "如何配置 Dify 的\"服务依赖检查\"？", "options": {"A": "启动后检查", "B": "启动时检查所有依赖服务是否可用", "C": "不检查依赖", "D": "手动验证"}, "answer": "B", "answerType": "single", "explanation": "依赖检查配置：\n- 启动时检查数据库连接\n- 验证 Redis 可用性\n- 检查向量数据库\n- 失败时阻止启动", "difficulty": "medium"},
    {"id": "q50", "domain": 3, "question": "Dify 中如何实现\"成本预算控制\"？", "options": {"A": "不控制成本", "B": "设置预算上限和使用告警", "C": "事后分析", "D": "减少使用"}, "answer": "B", "answerType": "single", "explanation": "成本预算控制：\n- 设置月度预算上限\n- 接近预算时告警\n- 按团队/项目分配额度\n- 超出预算时限制使用", "difficulty": "medium"}
  ]
}
