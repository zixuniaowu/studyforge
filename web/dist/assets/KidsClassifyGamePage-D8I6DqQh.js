import{r as h,j as e,u as v,d as Q,R as V,g as Y,e as _,A as ee,P as F}from"./index-C70cG7nT.js";import{u as ae}from"./kidsProgressStore-DZV-rkyN.js";import{C as $}from"./circle-check-big-jIxCMg9x.js";import{C as te}from"./circle-x-BMByeuTj.js";import{S as q}from"./star-BDZsaxOB.js";import{T as se}from"./trophy-Cv3_QBWU.js";import{A as re}from"./arrow-right-BAcxUvNg.js";import{H as ie}from"./house-Bext_wvL.js";import{L as ne}from"./lock-CkTSr5hM.js";const y=[{id:"level-1",name:{zh:"åŠ¨ç‰©å¤§åˆ†ç±»",ja:"å‹•ç‰©ã®åˆ†é¡ž"},description:{zh:"æŠŠåŠ¨ç‰©åˆ†åˆ°é™†åœ°å’Œæ°´ä¸­ï¼",ja:"å‹•ç‰©ã‚’é™¸ã¨æ°´ã«åˆ†ã‘ã‚ˆã†ï¼"},difficulty:"easy",timeLimit:60,starsReward:10,requiredCorrect:6,categories:[{id:"land",name:{zh:"é™†åœ°åŠ¨ç‰©",ja:"é™¸ã®å‹•ç‰©"},color:"#10B981",emoji:"ðŸ”ï¸"},{id:"water",name:{zh:"æ°´ä¸­åŠ¨ç‰©",ja:"æ°´ã®å‹•ç‰©"},color:"#3B82F6",emoji:"ðŸŒŠ"}],items:[{id:"dog",emoji:"ðŸ•",name:{zh:"ç‹—",ja:"çŠ¬"},categoryId:"land"},{id:"cat",emoji:"ðŸ±",name:{zh:"çŒ«",ja:"çŒ«"},categoryId:"land"},{id:"elephant",emoji:"ðŸ˜",name:{zh:"å¤§è±¡",ja:"è±¡"},categoryId:"land"},{id:"lion",emoji:"ðŸ¦",name:{zh:"ç‹®å­",ja:"ãƒ©ã‚¤ã‚ªãƒ³"},categoryId:"land"},{id:"rabbit",emoji:"ðŸ°",name:{zh:"å…”å­",ja:"ã†ã•ãŽ"},categoryId:"land"},{id:"fish",emoji:"ðŸŸ",name:{zh:"é±¼",ja:"é­š"},categoryId:"water"},{id:"dolphin",emoji:"ðŸ¬",name:{zh:"æµ·è±š",ja:"ã‚¤ãƒ«ã‚«"},categoryId:"water"},{id:"octopus",emoji:"ðŸ™",name:{zh:"ç« é±¼",ja:"ã‚¿ã‚³"},categoryId:"water"},{id:"whale",emoji:"ðŸ³",name:{zh:"é²¸é±¼",ja:"ã‚¯ã‚¸ãƒ©"},categoryId:"water"},{id:"crab",emoji:"ðŸ¦€",name:{zh:"èžƒèŸ¹",ja:"ã‚«ãƒ‹"},categoryId:"water"}]},{id:"level-2",name:{zh:"æ°´æžœè”¬èœå¤§ä½œæˆ˜",ja:"æžœç‰©ã¨é‡Žèœ"},description:{zh:"åŒºåˆ†æ°´æžœå’Œè”¬èœï¼",ja:"æžœç‰©ã¨é‡Žèœã‚’åˆ†ã‘ã‚ˆã†ï¼"},difficulty:"easy",timeLimit:50,starsReward:12,requiredCorrect:7,categories:[{id:"fruit",name:{zh:"æ°´æžœ",ja:"æžœç‰©"},color:"#F59E0B",emoji:"ðŸŽ"},{id:"vegetable",name:{zh:"è”¬èœ",ja:"é‡Žèœ"},color:"#22C55E",emoji:"ðŸ¥¬"}],items:[{id:"apple",emoji:"ðŸŽ",name:{zh:"è‹¹æžœ",ja:"ã‚Šã‚“ã”"},categoryId:"fruit"},{id:"banana",emoji:"ðŸŒ",name:{zh:"é¦™è•‰",ja:"ãƒãƒŠãƒŠ"},categoryId:"fruit"},{id:"orange",emoji:"ðŸŠ",name:{zh:"æ©˜å­",ja:"ã¿ã‹ã‚“"},categoryId:"fruit"},{id:"grape",emoji:"ðŸ‡",name:{zh:"è‘¡è„",ja:"ã¶ã©ã†"},categoryId:"fruit"},{id:"watermelon",emoji:"ðŸ‰",name:{zh:"è¥¿ç“œ",ja:"ã™ã„ã‹"},categoryId:"fruit"},{id:"carrot",emoji:"ðŸ¥•",name:{zh:"èƒ¡èåœ",ja:"ã«ã‚“ã˜ã‚“"},categoryId:"vegetable"},{id:"broccoli",emoji:"ðŸ¥¦",name:{zh:"è¥¿å…°èŠ±",ja:"ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼"},categoryId:"vegetable"},{id:"corn",emoji:"ðŸŒ½",name:{zh:"çŽ‰ç±³",ja:"ã¨ã†ã‚‚ã‚ã“ã—"},categoryId:"vegetable"},{id:"pepper",emoji:"ðŸ«‘",name:{zh:"é’æ¤’",ja:"ãƒ”ãƒ¼ãƒžãƒ³"},categoryId:"vegetable"},{id:"eggplant",emoji:"ðŸ†",name:{zh:"èŒ„å­",ja:"ãªã™"},categoryId:"vegetable"}]},{id:"level-3",name:{zh:"äº¤é€šå·¥å…·å¤§åˆ†ç±»",ja:"ä¹—ã‚Šç‰©ã®åˆ†é¡ž"},description:{zh:"è¿™äº›äº¤é€šå·¥å…·åœ¨å“ªé‡Œèµ°ï¼Ÿ",ja:"ã“ã‚Œã‚‰ã®ä¹—ã‚Šç‰©ã¯ã©ã“ã‚’èµ°ã‚‹ï¼Ÿ"},difficulty:"medium",timeLimit:45,starsReward:15,requiredCorrect:8,categories:[{id:"land-transport",name:{zh:"é™†åœ°",ja:"é™¸"},color:"#EF4444",emoji:"ðŸ›£ï¸"},{id:"sea-transport",name:{zh:"æµ·ä¸Š",ja:"æµ·"},color:"#3B82F6",emoji:"ðŸŒŠ"},{id:"air-transport",name:{zh:"å¤©ç©º",ja:"ç©º"},color:"#8B5CF6",emoji:"â˜ï¸"}],items:[{id:"car",emoji:"ðŸš—",name:{zh:"æ±½è½¦",ja:"è»Š"},categoryId:"land-transport"},{id:"bus",emoji:"ðŸšŒ",name:{zh:"å…¬äº¤è½¦",ja:"ãƒã‚¹"},categoryId:"land-transport"},{id:"train",emoji:"ðŸš‚",name:{zh:"ç«è½¦",ja:"é›»è»Š"},categoryId:"land-transport"},{id:"bike",emoji:"ðŸš²",name:{zh:"è‡ªè¡Œè½¦",ja:"è‡ªè»¢è»Š"},categoryId:"land-transport"},{id:"ship",emoji:"ðŸš¢",name:{zh:"è½®èˆ¹",ja:"èˆ¹"},categoryId:"sea-transport"},{id:"sailboat",emoji:"â›µ",name:{zh:"å¸†èˆ¹",ja:"ãƒ¨ãƒƒãƒˆ"},categoryId:"sea-transport"},{id:"speedboat",emoji:"ðŸš¤",name:{zh:"å¿«è‰‡",ja:"ãƒœãƒ¼ãƒˆ"},categoryId:"sea-transport"},{id:"airplane",emoji:"âœˆï¸",name:{zh:"é£žæœº",ja:"é£›è¡Œæ©Ÿ"},categoryId:"air-transport"},{id:"helicopter",emoji:"ðŸš",name:{zh:"ç›´å‡æœº",ja:"ãƒ˜ãƒªã‚³ãƒ—ã‚¿ãƒ¼"},categoryId:"air-transport"},{id:"rocket",emoji:"ðŸš€",name:{zh:"ç«ç®­",ja:"ãƒ­ã‚±ãƒƒãƒˆ"},categoryId:"air-transport"}]},{id:"level-4",name:{zh:"å¤©æ°”å°è¾¾äºº",ja:"ãŠå¤©æ°—ãƒžã‚¹ã‚¿ãƒ¼"},description:{zh:"è¿™æ˜¯ä»€ä¹ˆå¤©æ°”çš„ä¸œè¥¿ï¼Ÿ",ja:"ã“ã‚Œã¯ä½•ã®å¤©æ°—ã®ã‚‚ã®ï¼Ÿ"},difficulty:"medium",timeLimit:40,starsReward:15,requiredCorrect:7,categories:[{id:"sunny",name:{zh:"æ™´å¤©",ja:"æ™´ã‚Œ"},color:"#F59E0B",emoji:"â˜€ï¸"},{id:"rainy",name:{zh:"é›¨å¤©",ja:"é›¨"},color:"#6366F1",emoji:"ðŸŒ§ï¸"},{id:"snowy",name:{zh:"é›ªå¤©",ja:"é›ª"},color:"#06B6D4",emoji:"â„ï¸"}],items:[{id:"sunglasses",emoji:"ðŸ•¶ï¸",name:{zh:"å¢¨é•œ",ja:"ã‚µãƒ³ã‚°ãƒ©ã‚¹"},categoryId:"sunny"},{id:"icecream",emoji:"ðŸ¦",name:{zh:"å†°æ·‡æ·‹",ja:"ã‚¢ã‚¤ã‚¹"},categoryId:"sunny"},{id:"beach",emoji:"ðŸ–ï¸",name:{zh:"æµ·æ»©",ja:"ãƒ“ãƒ¼ãƒ"},categoryId:"sunny"},{id:"umbrella",emoji:"â˜‚ï¸",name:{zh:"é›¨ä¼ž",ja:"å‚˜"},categoryId:"rainy"},{id:"raincoat",emoji:"ðŸ§¥",name:{zh:"é›¨è¡£",ja:"ãƒ¬ã‚¤ãƒ³ã‚³ãƒ¼ãƒˆ"},categoryId:"rainy"},{id:"boots",emoji:"ðŸ¥¾",name:{zh:"é›¨é´",ja:"é•·é´"},categoryId:"rainy"},{id:"snowman",emoji:"â›„",name:{zh:"é›ªäºº",ja:"é›ªã ã‚‹ã¾"},categoryId:"snowy"},{id:"scarf",emoji:"ðŸ§£",name:{zh:"å›´å·¾",ja:"ãƒžãƒ•ãƒ©ãƒ¼"},categoryId:"snowy"},{id:"sled",emoji:"ðŸ›·",name:{zh:"é›ªæ©‡",ja:"ãã‚Š"},categoryId:"snowy"}]},{id:"level-5",name:{zh:"å½¢çŠ¶å¤§æŒ‘æˆ˜",ja:"å½¢ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸"},description:{zh:"æ‰¾å‡ºç›¸åŒå½¢çŠ¶çš„ä¸œè¥¿ï¼",ja:"åŒã˜å½¢ã®ã‚‚ã®ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼"},difficulty:"hard",timeLimit:35,starsReward:20,requiredCorrect:8,categories:[{id:"circle",name:{zh:"åœ†å½¢",ja:"ä¸¸"},color:"#EC4899",emoji:"â­•"},{id:"square",name:{zh:"æ–¹å½¢",ja:"å››è§’"},color:"#8B5CF6",emoji:"â¬œ"},{id:"triangle",name:{zh:"ä¸‰è§’å½¢",ja:"ä¸‰è§’"},color:"#F97316",emoji:"ðŸ”º"}],items:[{id:"ball",emoji:"âš½",name:{zh:"è¶³çƒ",ja:"ã‚µãƒƒã‚«ãƒ¼ãƒœãƒ¼ãƒ«"},categoryId:"circle"},{id:"cookie",emoji:"ðŸª",name:{zh:"é¥¼å¹²",ja:"ã‚¯ãƒƒã‚­ãƒ¼"},categoryId:"circle"},{id:"clock",emoji:"â°",name:{zh:"é’Ÿè¡¨",ja:"æ™‚è¨ˆ"},categoryId:"circle"},{id:"moon",emoji:"ðŸŒ•",name:{zh:"æœˆäº®",ja:"æœˆ"},categoryId:"circle"},{id:"gift",emoji:"ðŸŽ",name:{zh:"ç¤¼ç‰©",ja:"ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ"},categoryId:"square"},{id:"tv",emoji:"ðŸ“º",name:{zh:"ç”µè§†",ja:"ãƒ†ãƒ¬ãƒ“"},categoryId:"square"},{id:"book",emoji:"ðŸ“•",name:{zh:"ä¹¦æœ¬",ja:"æœ¬"},categoryId:"square"},{id:"pizza",emoji:"ðŸ•",name:{zh:"æŠ«è¨",ja:"ãƒ”ã‚¶"},categoryId:"triangle"},{id:"tent",emoji:"â›º",name:{zh:"å¸ç¯·",ja:"ãƒ†ãƒ³ãƒˆ"},categoryId:"triangle"},{id:"tree",emoji:"ðŸŽ„",name:{zh:"åœ£è¯žæ ‘",ja:"ã‚¯ãƒªã‚¹ãƒžã‚¹ãƒ„ãƒªãƒ¼"},categoryId:"triangle"}]},{id:"level-6",name:{zh:"AIå¤§æŒ‘æˆ˜",ja:"AIãƒãƒ£ãƒ¬ãƒ³ã‚¸"},description:{zh:"åƒAIä¸€æ ·åˆ†ç±»è¿™äº›ä¸œè¥¿ï¼",ja:"AIã®ã‚ˆã†ã«åˆ†é¡žã—ã‚ˆã†ï¼"},difficulty:"hard",timeLimit:30,starsReward:25,requiredCorrect:9,categories:[{id:"living",name:{zh:"ç”Ÿç‰©",ja:"ç”Ÿãç‰©"},color:"#22C55E",emoji:"ðŸŒ±"},{id:"machine",name:{zh:"æœºå™¨",ja:"æ©Ÿæ¢°"},color:"#6366F1",emoji:"âš™ï¸"},{id:"nature",name:{zh:"è‡ªç„¶",ja:"è‡ªç„¶"},color:"#F59E0B",emoji:"ðŸŒ"}],items:[{id:"flower",emoji:"ðŸŒ¸",name:{zh:"èŠ±",ja:"èŠ±"},categoryId:"living"},{id:"bird",emoji:"ðŸ¦",name:{zh:"é¸Ÿ",ja:"é³¥"},categoryId:"living"},{id:"butterfly",emoji:"ðŸ¦‹",name:{zh:"è´è¶",ja:"è¶"},categoryId:"living"},{id:"bee",emoji:"ðŸ",name:{zh:"èœœèœ‚",ja:"èœ‚"},categoryId:"living"},{id:"robot",emoji:"ðŸ¤–",name:{zh:"æœºå™¨äºº",ja:"ãƒ­ãƒœãƒƒãƒˆ"},categoryId:"machine"},{id:"computer",emoji:"ðŸ’»",name:{zh:"ç”µè„‘",ja:"ãƒ‘ã‚½ã‚³ãƒ³"},categoryId:"machine"},{id:"phone",emoji:"ðŸ“±",name:{zh:"æ‰‹æœº",ja:"ã‚¹ãƒžãƒ›"},categoryId:"machine"},{id:"mountain",emoji:"ðŸ”ï¸",name:{zh:"å±±",ja:"å±±"},categoryId:"nature"},{id:"rainbow",emoji:"ðŸŒˆ",name:{zh:"å½©è™¹",ja:"è™¹"},categoryId:"nature"},{id:"star",emoji:"â­",name:{zh:"æ˜Ÿæ˜Ÿ",ja:"æ˜Ÿ"},categoryId:"nature"},{id:"sun",emoji:"â˜€ï¸",name:{zh:"å¤ªé˜³",ja:"å¤ªé™½"},categoryId:"nature"}]}],le=t=>y.find(s=>s.id===t),T=t=>{const s=y.findIndex(n=>n.id===t);return s<y.length-1?y[s+1]:null},oe=({item:t,onDragStart:s,onDragEnd:n,isClassified:c,isCorrect:l})=>{const[o,d]=h.useState(!1),m=h.useRef(null),x=u=>{if(d(!0),s(t),m.current){const f=m.current.getBoundingClientRect();u.dataTransfer.setDragImage(m.current,f.width/2,f.height/2)}u.dataTransfer.effectAllowed="move",u.dataTransfer.setData("text/plain",t.id)},a=()=>{d(!1),n()},j=u=>{u.preventDefault(),d(!0),s(t)},i=()=>{d(!1),n()};return c?e.jsxs("div",{className:`
          w-16 h-16 rounded-xl flex items-center justify-center text-3xl
          transition-all duration-300 opacity-50 relative
          ${l?"bg-green-100":"bg-red-100"}
        `,children:[t.emoji,e.jsx("div",{className:"absolute -top-1 -right-1 text-sm",children:l?"âœ…":"âŒ"})]}):e.jsxs("div",{ref:m,draggable:!0,onDragStart:x,onDragEnd:a,onTouchStart:j,onTouchEnd:i,className:`
        w-16 h-16 rounded-xl bg-white shadow-lg border-2 border-gray-100
        flex items-center justify-center text-3xl cursor-grab active:cursor-grabbing
        transition-all duration-200 select-none relative
        ${o?"scale-110 shadow-2xl opacity-70 rotate-6 z-50":"hover:scale-105 hover:shadow-xl hover:border-purple-300"}
      `,children:[t.emoji,e.jsx("div",{className:"absolute inset-0 rounded-xl opacity-0 hover:opacity-100 transition-opacity pointer-events-none",style:{boxShadow:"0 0 15px rgba(147, 51, 234, 0.3)"}})]})},de=({category:t,onDrop:s,droppedItems:n,isActive:c})=>{const[l,o]=h.useState(!1),{language:d}=v(),m=d==="zh",x=i=>{i.preventDefault(),i.dataTransfer.dropEffect="move",o(!0)},a=()=>{o(!1)},j=i=>{i.preventDefault(),o(!1);const u=i.dataTransfer.getData("text/plain");s({id:u},t.id)};return e.jsxs("div",{onDragOver:x,onDragLeave:a,onDrop:j,className:`
        relative flex flex-col items-center p-3 rounded-2xl border-4 border-dashed
        transition-all duration-300 h-full min-h-[180px]
        ${l?"border-solid scale-[1.02] shadow-2xl":c?"border-gray-300 bg-gray-50":"border-gray-200 bg-white/50"}
      `,style:{borderColor:l?t.color:void 0,backgroundColor:l?`${t.color}15`:void 0},children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full mb-2",style:{backgroundColor:t.color},children:[e.jsx("span",{className:"text-xl",children:t.emoji}),e.jsx("span",{className:"text-white font-bold text-base",children:m?t.name.zh:t.name.ja})]}),e.jsx("div",{className:"flex-1 w-full flex flex-wrap justify-center content-start gap-2 overflow-auto",children:n.length===0?e.jsxs("div",{className:"text-gray-400 text-center py-4",children:[e.jsx("div",{className:"text-3xl mb-1",children:"ðŸ‘†"}),e.jsx("p",{className:"text-xs",children:m?"æ‹–åˆ°è¿™é‡Œ":"ã“ã“ã«ãƒ‰ãƒ©ãƒƒã‚°"})]}):n.map(i=>e.jsx("div",{className:"w-12 h-12 rounded-lg bg-white shadow flex items-center justify-center text-2xl animate-bounceIn",children:i.emoji},i.id))}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg",style:{backgroundColor:t.color},children:n.length}),l&&e.jsx("div",{className:"absolute inset-0 rounded-3xl animate-pulse",style:{boxShadow:`0 0 30px ${t.color}50`}})]})},ce=({totalTime:t,isRunning:s,onTimeUp:n})=>{const[c,l]=h.useState(t);h.useEffect(()=>{l(t)},[t]),h.useEffect(()=>{if(!s)return;const a=setInterval(()=>{l(j=>j<=1?(clearInterval(a),n(),0):j-1)},1e3);return()=>clearInterval(a)},[s,n]);const o=c/t*100,d=o<30,m=o<15,x=a=>{const j=Math.floor(a/60),i=a%60;return`${j}:${i.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:`
          flex items-center gap-2 px-4 py-2 rounded-full font-bold text-xl
          transition-all duration-300
          ${m?"bg-red-500 text-white animate-pulse scale-110":d?"bg-orange-500 text-white":"bg-purple-100 text-purple-600"}
        `,children:[e.jsx(Q,{className:`w-6 h-6 ${m?"animate-spin":""}`}),e.jsx("span",{children:x(c)})]}),e.jsx("div",{className:"w-48 h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`
            h-full rounded-full transition-all duration-1000 ease-linear
            ${m?"bg-red-500":d?"bg-orange-500":"bg-purple-500"}
          `,style:{width:`${o}%`},children:e.jsx("div",{className:"h-full w-full animate-shimmer",style:{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)"}})})}),m&&e.jsx("span",{className:"text-red-500 font-bold animate-bounce text-sm",children:"âš ï¸ å¿«æ²¡æ—¶é—´äº†ï¼"})]})},me=({correct:t,wrong:s,total:n,starsReward:c})=>{const{language:l}=v(),o=l==="zh",d=n-t-s;return e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1.5 bg-green-100 px-3 py-1.5 rounded-full",children:[e.jsx($,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-bold text-green-600",children:t}),e.jsx("span",{className:"text-green-500 text-xs hidden sm:inline",children:o?"æ­£ç¡®":"æ­£è§£"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-red-100 px-3 py-1.5 rounded-full",children:[e.jsx(te,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"font-bold text-red-600",children:s}),e.jsx("span",{className:"text-red-500 text-xs hidden sm:inline",children:o?"é”™è¯¯":"é–“é•ã„"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-100 px-3 py-1.5 rounded-full",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“¦"}),e.jsx("span",{className:"font-bold text-gray-600",children:d}),e.jsx("span",{className:"text-gray-500 text-xs hidden sm:inline",children:o?"å‰©ä½™":"æ®‹ã‚Š"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-yellow-100 px-3 py-1.5 rounded-full",children:[e.jsx(q,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"font-bold text-yellow-600",children:c})]})]})},he=({show:t,level:s,correct:n,wrong:c,timeUsed:l,isPassed:o,onReplay:d,onNextLevel:m,onHome:x,hasNextLevel:a})=>{const{language:j}=v(),i=j==="zh";if(!t)return null;const u=Math.round(n/(n+c)*100),f=o?s.starsReward:Math.floor(s.starsReward*.3);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl animate-bounceIn",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-7xl mb-4",children:o?"ðŸŽ‰":"ðŸ’ª"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:o?i?"å¤ªæ£’äº†ï¼":"ã™ã”ã„ï¼":i?"å†æŽ¥å†åŽ‰ï¼":"ã‚‚ã†ä¸€åº¦ï¼"}),e.jsx("p",{className:"text-gray-600",children:i?s.name.zh:s.name.ja})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:n}),e.jsx("div",{className:"text-sm text-green-500",children:i?"æ­£ç¡®":"æ­£è§£"})]}),e.jsxs("div",{className:"bg-red-50 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:c}),e.jsx("div",{className:"text-sm text-red-500",children:i?"é”™è¯¯":"é–“é•ã„"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-2xl p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[u,"%"]}),e.jsx("div",{className:"text-sm text-blue-500",children:i?"å‡†ç¡®çŽ‡":"æ­£ç¢ºçŽ‡"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-2xl p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[l,"s"]}),e.jsx("div",{className:"text-sm text-purple-500",children:i?"ç”¨æ—¶":"æ™‚é–“"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 bg-yellow-50 rounded-2xl py-4 mb-6",children:[e.jsx(q,{className:"w-8 h-8 text-yellow-500 fill-yellow-500"}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-600",children:["+",f]}),e.jsx("span",{className:"text-yellow-500",children:i?"æ˜Ÿæ˜Ÿ":"æ˜Ÿ"})]}),o&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-600 mb-6",children:[e.jsx(se,{className:"w-6 h-6"}),e.jsx("span",{className:"font-medium",children:i?"é€šå…³æˆåŠŸï¼":"ã‚¯ãƒªã‚¢ï¼"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[o&&a?e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-2xl font-bold text-lg hover:opacity-90 transition-opacity",children:[e.jsx("span",{children:i?"ä¸‹ä¸€å…³":"æ¬¡ã®ãƒ¬ãƒ™ãƒ«"}),e.jsx(re,{className:"w-6 h-6"})]}):e.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-2xl font-bold text-lg hover:opacity-90 transition-opacity",children:[e.jsx(V,{className:"w-6 h-6"}),e.jsx("span",{children:i?"å†çŽ©ä¸€æ¬¡":"ã‚‚ã†ä¸€åº¦"})]}),e.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 bg-gray-100 text-gray-700 py-4 rounded-2xl font-bold text-lg hover:bg-gray-200 transition-colors",children:[e.jsx(ie,{className:"w-6 h-6"}),e.jsx("span",{children:i?"è¿”å›žé¦–é¡µ":"ãƒ›ãƒ¼ãƒ ã¸"})]})]})]})})},xe=t=>{const s=[...t];for(let n=s.length-1;n>0;n--){const c=Math.floor(Math.random()*(n+1));[s[n],s[c]]=[s[c],s[n]]}return s},je=({levels:t,currentLevelIndex:s,onSelect:n})=>{const{language:c}=v(),l=c==="zh",o={easy:"bg-green-500",medium:"bg-yellow-500",hard:"bg-red-500"};return e.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-6",children:t.map((d,m)=>{const x=m<=s,a=m===s;return e.jsxs("button",{onClick:()=>x&&n(m),disabled:!x,className:`
              relative px-4 py-3 rounded-2xl font-medium transition-all
              ${a?"bg-purple-500 text-white shadow-lg scale-105":x?"bg-white text-gray-700 hover:bg-purple-100 shadow":"bg-gray-200 text-gray-400 cursor-not-allowed"}
            `,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x?a?e.jsx(F,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4 text-green-500"}):e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:l?d.name.zh:d.name.ja})]}),e.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 rounded-full ${o[d.difficulty]}`})]},d.id)})})};function Ie(){const t=Y(),{levelId:s}=_(),{language:n}=v(),{addStars:c}=ae(),l=n==="zh",[o,d]=h.useState("selecting"),[m,x]=h.useState(0),[a,j]=h.useState(null),[i,u]=h.useState([]),[f,I]=h.useState(new Map),[b,C]=h.useState(0),[S,k]=h.useState(0),[A,z]=h.useState(0),[L,B]=h.useState(0),[M,D]=h.useState(null);h.useEffect(()=>{if(s){const r=le(s);if(r){const g=y.findIndex(N=>N.id===s);x(g),j(r)}}},[s]);const w=h.useCallback(r=>{j(r),u(xe(r.items)),I(new Map),C(0),k(0),z(0),B(Date.now()),d("playing")},[]),G=r=>{x(r);const g=y[r];j(g),w(g)},Z=h.useCallback((r,g)=>{if(!a)return;const N=a.items.find(p=>p.id===r.id);if(!N)return;const E=N.categoryId===g;if(I(p=>new Map(p).set(r.id,g)),E?C(p=>p+1):k(p=>p+1),f.size+1>=a.items.length){const p=Math.round((Date.now()-L)/1e3);z(p),d("finished");const J=b+(E?1:0)>=a.requiredCorrect;c(J?a.starsReward:Math.floor(a.starsReward*.3))}},[a,f,L,b,c]),O=h.useCallback(()=>{if(!a)return;const r=a.timeLimit;z(r),d("finished")},[a]),U=()=>{a&&w(a)},H=()=>{if(a){const r=T(a.id);r&&(x(g=>g+1),w(r))}},R=i.filter(r=>!f.has(r.id)),P=r=>i.filter(g=>f.get(g.id)===r),K=r=>f.get(r.id)===r.categoryId,W=a?b>=a.requiredCorrect:!1,X=a?!!T(a.id):!1;return e.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:"linear-gradient(180deg, #FFF8F0 0%, #FFE8D6 100%)"},children:[e.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-orange-400 via-pink-500 to-purple-500 text-white shadow-lg",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>t("/kids-course"),className:"bg-white/20 backdrop-blur-sm rounded-xl px-3 py-2 flex items-center gap-2 hover:bg-white/30 transition-all",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:l?"è¿”å›ž":"æˆ»ã‚‹"})]}),e.jsxs("h1",{className:"text-lg font-bold flex items-center gap-2",children:["ðŸŽ® ",l?"å›¾ç‰‡åˆ†ç±»æ¸¸æˆ":"ç”»åƒåˆ†é¡žã‚²ãƒ¼ãƒ "]})]}),o==="playing"&&a&&e.jsx(ce,{totalTime:a.timeLimit,isRunning:o==="playing",onTimeUp:O})]})})}),e.jsxs("div",{className:"flex-1 px-3 py-4 w-full",children:[o==="selecting"&&e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:l?"é€‰æ‹©å…³å¡":"ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠž"}),e.jsx("p",{className:"text-gray-600 mb-8",children:l?"å­¦ä¹ åƒAIä¸€æ ·å¯¹å›¾ç‰‡è¿›è¡Œåˆ†ç±»ï¼":"AIã®ã‚ˆã†ã«ç”»åƒã‚’åˆ†é¡žã—ã‚ˆã†ï¼"}),e.jsx(je,{levels:y,currentLevelIndex:m,onSelect:G}),a&&e.jsxs("div",{className:"mt-8 bg-white rounded-3xl p-6 shadow-lg max-w-md mx-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:l?a.name.zh:a.name.ja}),e.jsx("p",{className:"text-gray-600 mb-4",children:l?a.description.zh:a.description.ja}),e.jsxs("div",{className:"flex justify-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("span",{children:["â±ï¸ ",a.timeLimit,"s"]}),e.jsxs("span",{children:["â­ ",a.starsReward]}),e.jsxs("span",{children:["ðŸŽ¯ ",a.requiredCorrect,"/",a.items.length]})]}),e.jsxs("button",{onClick:()=>w(a),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-2xl font-bold hover:opacity-90 transition-opacity flex items-center justify-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),l?"å¼€å§‹æ¸¸æˆ":"ã‚²ãƒ¼ãƒ é–‹å§‹"]})]})]}),o==="playing"&&a&&e.jsxs("div",{className:"flex flex-col h-full gap-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?a.name.zh:a.name.ja})}),e.jsx(me,{correct:b,wrong:S,total:a.items.length,starsReward:a.starsReward}),e.jsx("div",{className:`grid gap-3 flex-1 ${a.categories.length===2?"grid-cols-2":"grid-cols-3"}`,children:a.categories.map(r=>e.jsx(de,{category:r,onDrop:Z,droppedItems:P(r.id),isActive:!!M},r.id))}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-lg",children:[e.jsx("h3",{className:"text-base font-bold text-gray-700 mb-3 text-center",children:l?"ðŸ‘† æ‹–åŠ¨å›¾ç‰‡åˆ°ä¸Šæ–¹åˆ†ç±»åŒº":"ðŸ‘† ç”»åƒã‚’ä¸Šã®åˆ†é¡žã‚¨ãƒªã‚¢ã«ãƒ‰ãƒ©ãƒƒã‚°"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[R.map(r=>e.jsx(oe,{item:r,onDragStart:D,onDragEnd:()=>D(null),isClassified:f.has(r.id),isCorrect:K(r)},r.id)),R.length===0&&e.jsxs("div",{className:"text-gray-400 py-4",children:[e.jsx("div",{className:"text-3xl mb-1",children:"ðŸŽ‰"}),e.jsx("p",{children:l?"å…¨éƒ¨åˆ†ç±»å®Œæˆï¼":"ã™ã¹ã¦åˆ†é¡žå®Œäº†ï¼"})]})]})]})]})]}),a&&e.jsx(he,{show:o==="finished",level:a,correct:b,wrong:S,timeUsed:A,isPassed:W,onReplay:U,onNextLevel:H,onHome:()=>t("/kids-course"),hasNextLevel:X})]})}export{Ie as default};
