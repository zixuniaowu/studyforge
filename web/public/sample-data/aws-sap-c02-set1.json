{
  "exam": {
    "id": "aws-sap-c02-set1",
    "name": "AWS SAP-C02 模拟考试 #1",
    "code": "SAP-C02",
    "provider": "AWS",
    "language": "zh-CN",
    "description": "AWS Solutions Architect Professional (SAP-C02) 认证模拟考试第一套，涵盖复杂架构设计、迁移策略、成本优化和组织复杂性管理。",
    "totalQuestions": 40,
    "passingScore": 75,
    "examTime": 180,
    "domains": [
      {"id": 1, "name": "复杂组织的解决方案设计", "weight": 26},
      {"id": 2, "name": "新解决方案设计", "weight": 29},
      {"id": 3, "name": "持续改进现有解决方案", "weight": 25},
      {"id": 4, "name": "加速工作负载迁移和现代化", "weight": 20}
    ],
    "tags": ["AWS", "SAP-C02", "Professional", "Architecture"]
  },
  "questions": [
    {
      "id": 1,
      "domain": 1,
      "question": "一家跨国公司在 AWS Organizations 中有超过 200 个账户。安全团队需要确保所有账户中的 S3 存储桶都启用了默认加密，并且阻止公共访问。如何以最小的运维开销实现这一目标？",
      "options": {
        "A": "使用 AWS Config 规则检测不合规的存储桶，并使用 Lambda 函数自动修复",
        "B": "使用 Service Control Policies (SCPs) 阻止创建未加密或公开的存储桶",
        "C": "在每个账户中部署 CloudFormation StackSets 来配置 S3 存储桶策略",
        "D": "使用 AWS Control Tower 的强制性护栏来实施这些控制"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Service Control Policies (SCPs) 可以在组织级别强制执行策略，阻止创建不符合安全要求的资源。这是最低运维开销的解决方案，因为它在 API 级别就阻止了不合规操作。",
      "difficulty": "hard"
    },
    {
      "id": 2,
      "domain": 1,
      "question": "公司正在实施多账户策略，需要集中管理所有账户的 VPC 网络连接。有超过 50 个 VPC 需要相互通信，同时需要连接到本地数据中心。最佳架构方案是什么？",
      "options": {
        "A": "在每对 VPC 之间创建 VPC Peering 连接",
        "B": "使用 AWS Transit Gateway 作为中心枢纽连接所有 VPC 和本地网络",
        "C": "使用 AWS PrivateLink 在 VPC 之间建立连接",
        "D": "在每个 VPC 中部署 VPN 网关连接到本地"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "AWS Transit Gateway 是连接大量 VPC 和本地网络的最佳选择。它提供了一个中心枢纽模型，避免了 VPC Peering 的复杂网状拓扑（50个VPC需要1225个peering连接），并支持与 Direct Connect 和 VPN 集成。",
      "difficulty": "medium"
    },
    {
      "id": 3,
      "domain": 2,
      "question": "一个电商平台在促销期间流量可能增加 10 倍。应用程序使用 Amazon RDS MySQL 数据库，在高峰期数据库成为瓶颈。需要保证读写性能的同时控制成本。最佳解决方案是什么？",
      "options": {
        "A": "将 RDS 实例升级到最大规格",
        "B": "迁移到 Amazon Aurora MySQL，使用读取副本和 Aurora Serverless v2",
        "C": "在 RDS 前面添加 ElastiCache 缓存层",
        "D": "使用 RDS Multi-AZ 部署提高性能"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Amazon Aurora 提供比 MySQL 更高的性能（最高5倍），Aurora Serverless v2 可以根据负载自动扩展计算容量，读取副本可以分担读取压力。这个组合既能处理峰值负载，又能在低谷期控制成本。",
      "difficulty": "hard"
    },
    {
      "id": 4,
      "domain": 2,
      "question": "公司需要构建一个实时数据分析平台，每秒接收超过 100 万条事件记录。数据需要实时处理并存储以供后续分析。最佳架构是什么？",
      "options": {
        "A": "Amazon SQS -> Lambda -> DynamoDB",
        "B": "Amazon Kinesis Data Streams -> Kinesis Data Analytics -> S3 + Redshift",
        "C": "Amazon MSK -> EC2 消费者 -> RDS",
        "D": "API Gateway -> Lambda -> Aurora"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Kinesis Data Streams 专为大规模实时数据摄取设计，可处理每秒数百万条记录。Kinesis Data Analytics 提供实时 SQL 分析，S3 用于持久存储，Redshift 用于复杂分析查询。这是 AWS 原生的实时分析架构。",
      "difficulty": "medium"
    },
    {
      "id": 5,
      "domain": 3,
      "question": "一个应用程序使用 Lambda 函数处理来自 S3 的文件，每个文件处理需要 10 分钟。处理过程中经常因为超时失败。如何改进这个架构？",
      "options": {
        "A": "增加 Lambda 函数的内存配置",
        "B": "使用 Lambda 的预置并发",
        "C": "将处理逻辑迁移到 AWS Step Functions 与多个短时 Lambda 函数配合",
        "D": "使用 Lambda 的异步调用模式"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "Lambda 最大执行时间为 15 分钟，10 分钟的处理时间接近限制且没有容错空间。使用 Step Functions 将长时间运行的工作流分解为多个较短的 Lambda 函数，提供更好的错误处理、重试机制和状态管理。",
      "difficulty": "medium"
    },
    {
      "id": 6,
      "domain": 4,
      "question": "公司计划将本地 VMware 虚拟化环境中的 500 台虚拟机迁移到 AWS。需要最小化停机时间和迁移风险。推荐的迁移策略是什么？",
      "options": {
        "A": "使用 AWS Application Migration Service (MGN) 进行连续复制和切换",
        "B": "使用 VM Import/Export 导出 VMDK 并导入 AWS",
        "C": "使用 CloudEndure Migration 进行迁移",
        "D": "手动在 AWS 上重建所有应用程序"
      },
      "answer": "A",
      "answerType": "single",
      "explanation": "AWS Application Migration Service (MGN) 是推荐的迁移工具，它提供连续块级复制，可以在最小停机时间内完成迁移。它支持自动化的切换过程，并且可以在切换前进行测试，降低迁移风险。",
      "difficulty": "medium"
    },
    {
      "id": 7,
      "domain": 1,
      "question": "公司使用 AWS Organizations 管理多个业务部门的账户。需要实现以下需求：各部门独立管理自己的资源，但共享某些核心服务（如 Directory Service）。如何设计？",
      "options": {
        "A": "在每个账户中部署相同的核心服务",
        "B": "使用 AWS Resource Access Manager (RAM) 在账户间共享资源",
        "C": "将所有资源放在一个中央账户中",
        "D": "使用 VPC Peering 让所有账户访问中央服务"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "AWS Resource Access Manager (RAM) 允许在 AWS Organizations 内的账户间安全地共享资源，如子网、Transit Gateway、License Manager 配置等。这样既保持了各部门的独立性，又实现了核心服务的集中管理和成本优化。",
      "difficulty": "medium"
    },
    {
      "id": 8,
      "domain": 2,
      "question": "一个全球性应用需要在多个 AWS 区域部署，要求 RPO < 1 分钟，RTO < 5 分钟。应用使用 PostgreSQL 数据库。最佳架构是什么？",
      "options": {
        "A": "使用 RDS Multi-AZ 部署",
        "B": "使用 Aurora Global Database 实现跨区域复制",
        "C": "使用数据库复制软件手动配置跨区域复制",
        "D": "使用 DynamoDB Global Tables"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Aurora Global Database 提供跨区域复制，复制延迟通常小于1秒（满足 RPO < 1分钟），可以在灾难发生时快速提升次要区域为主区域（满足 RTO < 5分钟）。它专为 PostgreSQL 和 MySQL 兼容的工作负载设计。",
      "difficulty": "hard"
    },
    {
      "id": 9,
      "domain": 3,
      "question": "公司的 AWS 账单每月增长 20%，CFO 要求优化成本。当前主要使用按需 EC2 实例运行生产工作负载。最有效的成本优化策略是什么？（选择两项）",
      "options": {
        "A": "对于稳定的基线负载购买 Savings Plans 或预留实例",
        "B": "将所有工作负载迁移到 Spot 实例",
        "C": "使用 AWS Compute Optimizer 识别过度配置的资源",
        "D": "将所有实例类型升级到最新一代"
      },
      "answer": ["A", "C"],
      "answerType": "multiple",
      "explanation": "Savings Plans 或预留实例可以为稳定工作负载节省高达 72% 的成本。Compute Optimizer 分析使用模式，识别过度配置的资源。Spot 实例可能被中断，不适合所有生产工作负载。升级到最新一代可能有帮助，但不是最直接的成本优化措施。",
      "difficulty": "medium"
    },
    {
      "id": 10,
      "domain": 4,
      "question": "公司正在将传统的单体应用程序现代化为微服务架构。应用程序当前运行在 EC2 上，使用 Oracle 数据库。如何分阶段实现现代化？",
      "options": {
        "A": "一次性将整个应用程序重写为微服务",
        "B": "使用 Strangler Fig 模式逐步将功能模块提取为微服务",
        "C": "保持单体架构，只迁移数据库到云",
        "D": "将单体应用程序容器化后再进行拆分"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Strangler Fig 模式允许逐步将单体应用的功能提取为独立的微服务，同时保持现有功能正常运行。这种渐进式方法降低了风险，允许团队学习和适应，并在整个过程中保持业务连续性。",
      "difficulty": "medium"
    },
    {
      "id": 11,
      "domain": 1,
      "question": "一家金融公司需要确保所有 API 调用都被记录并保留 7 年以满足合规要求。API 使用 Amazon API Gateway 和 Lambda。最佳实现方案是什么？",
      "options": {
        "A": "启用 API Gateway 访问日志，发送到 CloudWatch Logs，配置 7 年保留期",
        "B": "在 Lambda 函数中记录所有请求，存储到 S3",
        "C": "使用 AWS CloudTrail 记录所有 API Gateway 调用，启用日志归档到 S3",
        "D": "使用 Kinesis Data Firehose 将日志发送到 S3，配置生命周期策略"
      },
      "answer": "D",
      "answerType": "single",
      "explanation": "Kinesis Data Firehose 可以可靠地将大量日志数据流式传输到 S3，S3 生命周期策略可以将数据转移到 Glacier 等低成本存储以实现长期保留。这个方案成本效益高且可扩展。CloudWatch Logs 长期存储成本较高。",
      "difficulty": "hard"
    },
    {
      "id": 12,
      "domain": 2,
      "question": "公司需要构建一个机器学习推理端点，需要低延迟响应（< 100ms），并且流量波动很大（从每秒10个请求到10000个请求）。最佳解决方案是什么？",
      "options": {
        "A": "使用 EC2 实例运行推理服务，配置 Auto Scaling",
        "B": "使用 SageMaker 实时端点配合 Auto Scaling",
        "C": "使用 Lambda 函数进行推理",
        "D": "使用 SageMaker Serverless 推理端点"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "SageMaker 实时端点专为低延迟推理设计，配合 Auto Scaling 可以处理流量波动。Serverless 推理有冷启动问题，不适合低延迟要求。Lambda 有部署包大小和运行时限制，不适合复杂模型。",
      "difficulty": "hard"
    },
    {
      "id": 13,
      "domain": 3,
      "question": "应用程序使用 Amazon DynamoDB，最近查询延迟增加。分析发现某些分区键的访问量远高于其他键（热分区问题）。如何解决？",
      "options": {
        "A": "增加 DynamoDB 表的预置容量",
        "B": "启用 DynamoDB Auto Scaling",
        "C": "重新设计分区键以更均匀地分布访问模式",
        "D": "迁移到 RDS 数据库"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "热分区问题是由于访问模式不均匀导致的。增加容量或启用 Auto Scaling 无法解决分区级别的热点问题。正确的解决方案是重新设计分区键，可能使用复合键或添加随机后缀来更均匀地分布数据和访问。",
      "difficulty": "hard"
    },
    {
      "id": 14,
      "domain": 4,
      "question": "公司需要将 1PB 的数据从本地数据中心迁移到 Amazon S3。网络带宽有限（1 Gbps），需要在 30 天内完成迁移。最佳方案是什么？",
      "options": {
        "A": "使用 AWS DataSync 通过互联网传输",
        "B": "设置 AWS Direct Connect 后使用 DataSync",
        "C": "使用多个 AWS Snowball Edge 设备并行传输",
        "D": "使用 S3 Transfer Acceleration"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "1 Gbps 带宽理论最大传输约 10TB/天，1PB 需要 100 天，无法满足 30 天要求。Snowball Edge 每台可存储 80TB，使用 15-20 台 Snowball Edge 并行可以在 30 天内完成。设置 Direct Connect 本身就需要几周时间。",
      "difficulty": "medium"
    },
    {
      "id": 15,
      "domain": 1,
      "question": "公司需要在 AWS 上托管敏感的医疗健康数据，必须符合 HIPAA 合规要求。以下哪些措施是必需的？（选择两项）",
      "options": {
        "A": "与 AWS 签署 Business Associate Agreement (BAA)",
        "B": "只使用美国区域的 AWS 服务",
        "C": "对所有数据进行静态和传输加密",
        "D": "使用专用主机实例"
      },
      "answer": ["A", "C"],
      "answerType": "multiple",
      "explanation": "HIPAA 合规需要：1) 与 AWS 签署 BAA，明确双方责任；2) 对 PHI（受保护健康信息）进行加密。HIPAA 并不要求只使用美国区域或专用主机，但需要使用 HIPAA 合格服务列表中的服务。",
      "difficulty": "medium"
    },
    {
      "id": 16,
      "domain": 2,
      "question": "一个视频流媒体平台需要为全球用户提供低延迟的视频播放体验。视频文件存储在 S3 中。最佳分发架构是什么？",
      "options": {
        "A": "使用 S3 跨区域复制到多个区域",
        "B": "使用 CloudFront 作为 CDN，S3 作为源",
        "C": "在每个区域部署 EC2 实例缓存视频",
        "D": "使用 Global Accelerator 加速 S3 访问"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Amazon CloudFront 是 AWS 的 CDN 服务，在全球有超过 400 个边缘站点，可以将视频内容缓存到靠近用户的位置，显著降低延迟。它与 S3 原生集成，支持实时和点播视频流。",
      "difficulty": "easy"
    },
    {
      "id": 17,
      "domain": 3,
      "question": "一个 Lambda 函数偶尔出现冷启动问题，导致响应时间不稳定。函数使用 Java 运行时，处理时间敏感的交易请求。如何优化？（选择两项）",
      "options": {
        "A": "使用预置并发 (Provisioned Concurrency)",
        "B": "减小部署包大小，移除不必要的依赖",
        "C": "增加函数内存配置",
        "D": "将运行时更换为 Python"
      },
      "answer": ["A", "B"],
      "answerType": "multiple",
      "explanation": "预置并发确保指定数量的函数实例始终处于初始化状态，消除冷启动。减小部署包可以加快初始化速度。Java 运行时冷启动较慢是已知问题，但更换语言可能不实际。增加内存主要影响执行性能，对冷启动帮助有限。",
      "difficulty": "medium"
    },
    {
      "id": 18,
      "domain": 4,
      "question": "公司使用 Oracle 数据库，计划迁移到 AWS。数据库包含大量存储过程和触发器。最适合的迁移策略是什么？",
      "options": {
        "A": "使用 AWS DMS 直接迁移到 Aurora PostgreSQL",
        "B": "使用 AWS SCT 评估迁移复杂性，然后使用 DMS 进行迁移",
        "C": "先迁移到 RDS for Oracle，之后再考虑转换",
        "D": "完全重写应用程序以使用 DynamoDB"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "AWS Schema Conversion Tool (SCT) 可以分析 Oracle 数据库中的存储过程、触发器等对象，评估迁移到目标数据库的复杂性，并自动转换大部分代码。DMS 则负责数据迁移。这是处理复杂数据库迁移的最佳实践。",
      "difficulty": "medium"
    },
    {
      "id": 19,
      "domain": 1,
      "question": "公司需要实现跨多个 AWS 账户的集中日志管理。安全团队需要能够搜索和分析所有账户的 CloudTrail 和 VPC Flow Logs。最佳方案是什么？",
      "options": {
        "A": "在每个账户中配置 CloudWatch Logs，使用跨账户访问",
        "B": "创建组织级 CloudTrail，将所有日志发送到中央 S3 存储桶，使用 OpenSearch 进行分析",
        "C": "使用 AWS Security Hub 聚合所有日志",
        "D": "在每个账户中部署 SIEM 解决方案"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "组织级 CloudTrail 可以自动收集所有成员账户的 API 活动。将日志集中到一个 S3 存储桶便于管理和成本优化。OpenSearch (原 Elasticsearch) 提供强大的日志搜索和可视化能力。",
      "difficulty": "hard"
    },
    {
      "id": 20,
      "domain": 2,
      "question": "一个 IoT 平台需要处理来自 100 万个设备的数据，每个设备每秒发送一条消息。需要实时处理和持久化这些数据。最佳架构是什么？",
      "options": {
        "A": "AWS IoT Core -> Lambda -> DynamoDB",
        "B": "AWS IoT Core -> IoT Rules -> Kinesis Data Streams -> Lambda -> S3/DynamoDB",
        "C": "直接使用 MQTT 发送到 EC2 集群",
        "D": "AWS IoT Core -> SQS -> EC2 消费者"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "每秒 100 万条消息需要高吞吐量的架构。IoT Core 处理设备连接和消息路由，Kinesis Data Streams 提供高吞吐量的数据缓冲，Lambda 进行处理，然后存储到 S3 或 DynamoDB。直接使用 Lambda 处理可能遇到并发限制。",
      "difficulty": "hard"
    },
    {
      "id": 21,
      "domain": 3,
      "question": "一个应用使用 ECS on Fargate 运行容器化工作负载。容器需要访问 RDS 数据库和 S3 存储桶。如何安全地配置访问权限？",
      "options": {
        "A": "将数据库凭证作为环境变量传递给容器",
        "B": "使用 ECS 任务角色授予 S3 访问权限，使用 Secrets Manager 管理数据库凭证",
        "C": "将凭证硬编码在应用程序代码中",
        "D": "使用 IAM 用户的访问密钥"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "ECS 任务角色是授予容器 AWS 服务访问权限的最佳实践。Secrets Manager 可以安全地存储和自动轮换数据库凭证。避免使用环境变量存储敏感信息，因为它们可能在日志中暴露。",
      "difficulty": "medium"
    },
    {
      "id": 22,
      "domain": 4,
      "question": "公司需要将 Windows Server 应用程序迁移到 AWS。应用程序使用 Windows 文件共享存储用户数据。如何在 AWS 上实现等效功能？",
      "options": {
        "A": "使用 EBS 卷存储数据，在 EC2 实例间共享",
        "B": "使用 Amazon FSx for Windows File Server",
        "C": "使用 S3 配合 S3 File Gateway",
        "D": "使用 EFS 文件系统"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "Amazon FSx for Windows File Server 提供完全托管的 Windows 原生文件系统，支持 SMB 协议、NTFS、Active Directory 集成和 DFS 命名空间。这是迁移 Windows 文件共享的最佳选择。EFS 是 Linux 文件系统，不支持 Windows。",
      "difficulty": "easy"
    },
    {
      "id": 23,
      "domain": 1,
      "question": "公司的安全策略要求所有数据库连接必须加密，且只能从特定的应用程序服务器访问。如何在 RDS 中实现这一要求？（选择两项）",
      "options": {
        "A": "启用 RDS 的 SSL/TLS 加密，并在参数组中设置 require_ssl",
        "B": "配置安全组只允许应用服务器的 IP 访问数据库端口",
        "C": "使用 RDS Proxy 管理连接",
        "D": "将数据库部署在公有子网"
      },
      "answer": ["A", "B"],
      "answerType": "multiple",
      "explanation": "RDS 支持 SSL/TLS 加密传输中的数据，通过参数组可以强制所有连接使用 SSL。安全组作为虚拟防火墙，可以限制只有特定来源能够访问数据库。RDS Proxy 主要用于连接池管理，不是安全控制的主要手段。",
      "difficulty": "medium"
    },
    {
      "id": 24,
      "domain": 2,
      "question": "一个 SaaS 应用需要支持多租户架构，每个租户的数据必须完全隔离。应用使用 DynamoDB 存储数据。最佳设计方案是什么？",
      "options": {
        "A": "为每个租户创建单独的 DynamoDB 表",
        "B": "使用租户 ID 作为分区键的前缀来隔离数据",
        "C": "为每个租户创建单独的 AWS 账户",
        "D": "使用 DynamoDB 的条件表达式在应用层隔离"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "使用租户 ID 作为分区键前缀是 DynamoDB 多租户的最佳实践。这样可以在单个表中实现数据隔离，同时保持管理简单性和成本效率。每个租户一个表会增加管理开销，每个租户一个账户对于大多数场景来说过于复杂。",
      "difficulty": "hard"
    },
    {
      "id": 25,
      "domain": 3,
      "question": "应用程序使用 ALB 进行负载均衡，需要根据请求的 HTTP 头部将流量路由到不同的目标组。如何配置？",
      "options": {
        "A": "使用 ALB 的基于路径的路由",
        "B": "使用 ALB 的基于主机的路由",
        "C": "使用 ALB 的高级请求路由（基于 HTTP 头部条件）",
        "D": "使用 NLB 替代 ALB"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "ALB 支持基于 HTTP 头部、查询字符串、源 IP 等条件的高级请求路由。可以创建规则检查特定的 HTTP 头部值，并将匹配的请求路由到相应的目标组。",
      "difficulty": "easy"
    },
    {
      "id": 26,
      "domain": 4,
      "question": "公司正在将 .NET Framework 应用程序迁移到 AWS。应用程序需要 Windows Server 环境，但希望减少服务器管理工作。推荐的计算选项是什么？",
      "options": {
        "A": "使用 EC2 Windows 实例",
        "B": "使用 AWS App Runner",
        "C": "使用 Elastic Beanstalk 的 Windows Server 平台",
        "D": "使用 Lambda"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "Elastic Beanstalk 提供完全托管的 Windows Server 环境，支持 .NET Framework 应用程序，同时减少服务器管理工作。它处理容量预置、负载均衡、自动扩展和应用程序健康监控。App Runner 不支持 Windows，Lambda 不适合需要完整 Windows 环境的应用。",
      "difficulty": "medium"
    },
    {
      "id": 27,
      "domain": 1,
      "question": "公司需要对 AWS 资源实施标签策略，确保所有资源都有成本中心和环境标签。如何强制执行？",
      "options": {
        "A": "使用 AWS Config 规则检测未标记的资源",
        "B": "使用 AWS Organizations 的标签策略",
        "C": "在 IAM 策略中要求创建资源时必须提供标签",
        "D": "以上全部结合使用"
      },
      "answer": "D",
      "answerType": "single",
      "explanation": "最佳实践是组合使用：1) Organizations 标签策略定义标准标签格式；2) IAM 策略在创建时强制要求标签（aws:RequestTag 条件）；3) AWS Config 持续检测不合规资源。这提供了预防性和检测性控制的组合。",
      "difficulty": "medium"
    },
    {
      "id": 28,
      "domain": 2,
      "question": "一个 Web 应用需要存储用户会话数据，要求高可用性和低延迟（< 5ms）。预计有数百万个并发用户。最佳存储解决方案是什么？",
      "options": {
        "A": "Amazon RDS Multi-AZ",
        "B": "Amazon ElastiCache for Redis（集群模式）",
        "C": "Amazon S3",
        "D": "Amazon EBS"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "ElastiCache for Redis 提供亚毫秒级延迟的内存数据存储，集群模式支持水平扩展以处理数百万并发用户。Redis 支持自动故障转移，确保高可用性。它是会话存储的理想选择。",
      "difficulty": "medium"
    },
    {
      "id": 29,
      "domain": 3,
      "question": "一个应用程序在多个 EC2 实例上运行，使用粘性会话。需要在不影响用户体验的情况下进行滚动部署。如何实现？",
      "options": {
        "A": "将会话数据迁移到外部存储（如 ElastiCache），然后使用 ALB 的连接排空",
        "B": "在部署期间禁用粘性会话",
        "C": "同时终止所有旧实例",
        "D": "使用 NLB 替代 ALB"
      },
      "answer": "A",
      "answerType": "single",
      "explanation": "将会话外部化到 ElastiCache 使会话不再依赖特定实例，这是无状态应用的最佳实践。ALB 的连接排空功能允许正在处理的请求完成，同时停止向即将终止的实例发送新请求，确保平滑过渡。",
      "difficulty": "hard"
    },
    {
      "id": 30,
      "domain": 4,
      "question": "公司需要评估将数据中心应用程序迁移到 AWS 的总拥有成本 (TCO)。应该使用哪个 AWS 工具？",
      "options": {
        "A": "AWS Pricing Calculator",
        "B": "AWS Migration Evaluator",
        "C": "AWS Cost Explorer",
        "D": "AWS Budgets"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "AWS Migration Evaluator（原 TSO Logic）是专门用于评估迁移业务案例的工具。它分析本地环境的实际使用数据，生成 TCO 分析和迁移建议。Pricing Calculator 只估算 AWS 成本，不考虑当前本地成本。",
      "difficulty": "easy"
    },
    {
      "id": 31,
      "domain": 1,
      "question": "公司使用 AWS Control Tower 管理多账户环境。需要在所有账户中强制禁止根用户访问。如何实现？",
      "options": {
        "A": "删除所有账户的根用户",
        "B": "使用 Control Tower 的强制性护栏禁止根用户操作",
        "C": "在每个账户中手动禁用根用户",
        "D": "使用 SCP 阻止根用户的所有操作"
      },
      "answer": "D",
      "answerType": "single",
      "explanation": "Service Control Policies (SCPs) 可以限制根用户的操作（虽然无法完全禁止根用户登录，但可以阻止其执行大多数操作）。Control Tower 的护栏实际上也是通过 SCPs 实现的。根用户无法被删除或禁用，但其权限可以被 SCP 限制。",
      "difficulty": "hard"
    },
    {
      "id": 32,
      "domain": 2,
      "question": "一个分析平台需要处理 PB 级别的数据，执行复杂的 SQL 查询。数据主要是历史数据，查询频率不高但每次查询可能扫描大量数据。最佳解决方案是什么？",
      "options": {
        "A": "Amazon RDS with read replicas",
        "B": "Amazon Redshift with RA3 nodes",
        "C": "Amazon Athena with S3 data lake",
        "D": "Amazon Aurora"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "对于 PB 级数据和不频繁的查询，Athena + S3 数据湖是最具成本效益的方案。Athena 是无服务器的，按扫描数据量付费，不需要预置基础设施。S3 提供低成本的大规模存储。Redshift 更适合频繁的分析查询场景。",
      "difficulty": "medium"
    },
    {
      "id": 33,
      "domain": 3,
      "question": "应用程序使用 API Gateway + Lambda 架构，API 响应时间突然变慢。CloudWatch 显示 Lambda 并发执行数接近账户限制。如何解决？",
      "options": {
        "A": "请求增加 Lambda 并发限制",
        "B": "为关键函数配置预留并发，并请求增加账户限制",
        "C": "减少 Lambda 函数的超时时间",
        "D": "将 Lambda 替换为 EC2 实例"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "预留并发确保关键函数始终有可用的并发容量，不会被其他函数耗尽。同时请求增加账户并发限制以支持增长。仅增加限制可能不够，因为其他函数可能仍会争用资源。",
      "difficulty": "medium"
    },
    {
      "id": 34,
      "domain": 4,
      "question": "公司希望在迁移到云之前在本地测试 AWS 兼容的容器工作负载。推荐的方案是什么？",
      "options": {
        "A": "在本地安装 Docker",
        "B": "使用 AWS Outposts",
        "C": "使用 Amazon ECS Anywhere 或 EKS Anywhere",
        "D": "使用 LocalStack"
      },
      "answer": "C",
      "answerType": "single",
      "explanation": "ECS Anywhere 和 EKS Anywhere 允许在本地数据中心运行与 AWS 相同的容器编排平台。这确保了与云环境的一致性，便于未来迁移。它们使用相同的 API、工具和工作流程。",
      "difficulty": "medium"
    },
    {
      "id": 35,
      "domain": 1,
      "question": "公司需要确保 IAM 用户在创建后 90 天内必须更换密码，且密码不能重复使用最近 5 个密码。如何配置？",
      "options": {
        "A": "在 IAM 密码策略中配置这些要求",
        "B": "使用 Lambda 函数定期检查并强制更换密码",
        "C": "使用 AWS Config 规则监控密码年龄",
        "D": "在 SCP 中定义密码策略"
      },
      "answer": "A",
      "answerType": "single",
      "explanation": "IAM 密码策略提供了内置功能来设置密码过期时间（最大密码年龄）和防止密码重用（记住的密码数量）。这是最简单直接的解决方案，不需要自定义开发。",
      "difficulty": "easy"
    },
    {
      "id": 36,
      "domain": 2,
      "question": "一个应用需要处理突发性的图像处理任务。任务可以容忍延迟，但需要可靠完成。每个任务处理时间约 5 分钟。最佳架构是什么？",
      "options": {
        "A": "API Gateway + Lambda",
        "B": "SQS + Lambda（或 ECS）",
        "C": "SNS + Lambda",
        "D": "Kinesis + Lambda"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "SQS 提供可靠的消息队列，确保任务不会丢失。Lambda 或 ECS 可以从队列消费消息并处理。SQS 的可见性超时和死信队列功能保证任务最终完成。5分钟的处理时间在 Lambda 限制内，但如果需要更长时间可以使用 ECS。",
      "difficulty": "medium"
    },
    {
      "id": 37,
      "domain": 3,
      "question": "CloudWatch 警报显示 EC2 实例的 CPU 利用率持续很低（< 5%），但内存使用率很高。如何诊断问题？",
      "options": {
        "A": "CPU 利用率低说明实例过度配置，应该缩小规格",
        "B": "需要安装 CloudWatch Agent 收集内存指标进行详细分析",
        "C": "直接升级到内存优化型实例",
        "D": "这是正常的，不需要处理"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "EC2 默认不向 CloudWatch 报告内存使用率。如果题目中提到了内存使用率数据，说明已经安装了 CloudWatch Agent。接下来应该详细分析内存使用模式，确定是应用程序内存泄漏还是确实需要更多内存。",
      "difficulty": "medium"
    },
    {
      "id": 38,
      "domain": 4,
      "question": "公司的本地 Active Directory 有 10,000 个用户，需要在迁移到 AWS 后继续使用现有身份进行 AWS 服务认证。最佳方案是什么？",
      "options": {
        "A": "在 IAM 中为每个用户创建对应的 IAM 用户",
        "B": "使用 AWS Directory Service 的 AD Connector 连接到本地 AD",
        "C": "将所有用户导入 Amazon Cognito",
        "D": "使用 AWS SSO（IAM Identity Center）与本地 AD 集成"
      },
      "answer": "D",
      "answerType": "single",
      "explanation": "AWS IAM Identity Center（原 AWS SSO）可以与本地 Active Directory 集成，使用户能够使用现有企业凭证访问 AWS 账户和应用程序。它提供集中的访问管理和单点登录，是企业级身份联合的最佳选择。",
      "difficulty": "medium"
    },
    {
      "id": 39,
      "domain": 1,
      "question": "公司需要在 AWS 和 Azure 之间建立私有网络连接。应该使用什么解决方案？",
      "options": {
        "A": "通过公共互联网使用 VPN",
        "B": "使用 AWS Direct Connect 和 Azure ExpressRoute 连接到同一托管位置",
        "C": "使用 AWS Transit Gateway 直接连接 Azure",
        "D": "使用 AWS PrivateLink 连接 Azure"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "要在 AWS 和 Azure 之间建立私有连接，可以在支持两家云提供商的托管设施（如 Equinix）中建立 Direct Connect 和 ExpressRoute 连接，然后通过该设施路由流量。这提供了低延迟的私有连接。",
      "difficulty": "hard"
    },
    {
      "id": 40,
      "domain": 2,
      "question": "一个移动应用后端需要提供离线数据同步功能。用户可以在离线状态下修改数据，上线后需要自动同步并解决冲突。推荐的解决方案是什么？",
      "options": {
        "A": "使用 DynamoDB 和自定义同步逻辑",
        "B": "使用 AWS AppSync 和 Amplify DataStore",
        "C": "使用 Amazon Cognito Sync",
        "D": "使用 S3 存储用户数据"
      },
      "answer": "B",
      "answerType": "single",
      "explanation": "AWS AppSync 提供 GraphQL API，结合 Amplify DataStore 可以实现离线优先的数据同步。DataStore 自动处理离线存储、网络检测、数据同步和冲突解决。Cognito Sync 已被弃用，不推荐用于新应用。",
      "difficulty": "hard"
    }
  ]
}
