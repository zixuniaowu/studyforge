{
  "exam": {
    "id": "aws-dop-c02-set2",
    "name": "AWS DOP-C02 模拟考试 #2",
    "code": "DOP-C02",
    "provider": "AWS",
    "language": "zh-CN",
    "description": "AWS DevOps工程师专业级认证考试模拟题 - 第2套",
    "totalQuestions": 40,
    "passingScore": 75,
    "examTime": 180,
    "domains": [
      {"id": 1, "name": "SDLC Automation", "weight": 22},
      {"id": 2, "name": "Configuration Management and IaC", "weight": 17},
      {"id": 3, "name": "Resilient Cloud Solutions", "weight": 15},
      {"id": 4, "name": "Monitoring and Logging", "weight": 15},
      {"id": 5, "name": "Incident and Event Response", "weight": 14},
      {"id": 6, "name": "Security and Compliance", "weight": 17}
    ],
    "tags": ["AWS", "DevOps", "DOP", "认证考试", "专业级"]
  },
  "questions": [
    {"id": "q1", "domain": 1, "question": "团队需要实现GitFlow工作流，主分支合并需要通过所有测试。如何使用AWS服务实现？", "options": {"A": "手动运行测试", "B": "CodeCommit + CodeBuild配置分支保护和PR构建", "C": "使用Jenkins", "D": "使用Lambda触发测试"}, "answer": "B", "explanation": "CodeCommit支持创建审批规则模板，CodeBuild可以配置为PR触发构建，合并需要构建成功，实现自动化的代码质量门控。"},
    {"id": "q2", "domain": 1, "question": "需要在多个AWS区域同时部署应用程序。CodePipeline如何实现？", "options": {"A": "创建多个独立管道", "B": "使用跨区域操作部署到多个区域", "C": "手动部署到每个区域", "D": "使用Lambda同步"}, "answer": "B", "explanation": "CodePipeline支持跨区域操作，可以在单个管道中配置将制品复制到其他区域并执行部署操作。"},
    {"id": "q3", "domain": 1, "question": "CodeDeploy部署到EC2失败，日志显示AppSpec文件语法错误。如何验证AppSpec？", "options": {"A": "直接部署测试", "B": "使用CodeDeploy本地代理验证或YAML验证工具", "C": "查看CloudWatch Logs", "D": "联系AWS支持"}, "answer": "B", "explanation": "可以使用CodeDeploy本地代理在本地验证AppSpec文件和部署脚本，避免部署到生产环境时才发现问题。"},
    {"id": "q4", "domain": 2, "question": "CloudFormation栈创建超时，资源卡在CREATE_IN_PROGRESS状态。可能原因是？", "options": {"A": "模板语法错误", "B": "EC2实例cfn-signal未发送成功信号", "C": "IAM权限不足", "D": "区域容量不足"}, "answer": "B", "explanation": "如果使用CreationPolicy等待信号，但实例未能发送cfn-signal（如用户数据脚本失败），栈会等待直到超时。"},
    {"id": "q5", "domain": 2, "question": "需要在不同环境使用不同的实例类型和数量。CloudFormation如何实现？", "options": {"A": "创建多个模板", "B": "使用Mappings和Conditions基于环境参数选择配置", "C": "手动修改参数", "D": "使用嵌套栈"}, "answer": "B", "explanation": "Mappings定义环境到配置的映射，Conditions基于参数控制资源创建，实现单一模板适配多环境。"},
    {"id": "q6", "domain": 2, "question": "Elastic Beanstalk环境需要自定义Nginx配置。如何实现？", "options": {"A": "SSH到实例修改", "B": "使用.ebextensions配置文件", "C": "使用自定义AMI", "D": "使用CodeDeploy"}, "answer": "B", "explanation": ".ebextensions目录中的配置文件可以自定义环境，包括软件设置、文件、命令和服务配置。"},
    {"id": "q7", "domain": 3, "question": "需要确保Auto Scaling组中的实例分布在多个AZ。如何配置？", "options": {"A": "手动在每个AZ启动实例", "B": "在ASG配置中指定多个子网（每个AZ一个）", "C": "使用Placement Groups", "D": "使用Spread策略"}, "answer": "B", "explanation": "ASG配置多个子网（跨AZ）后，会自动在可用AZ间平衡实例分布，单AZ故障不会影响所有实例。"},
    {"id": "q8", "domain": 3, "question": "应用程序需要零停机更新。使用Elastic Beanstalk时应选择哪种部署策略？", "options": {"A": "All at once", "B": "Rolling with additional batch或Immutable", "C": "Rolling", "D": "手动部署"}, "answer": "B", "explanation": "Immutable部署在新ASG中启动新版本实例，验证通过后切换流量。Rolling with additional batch保持容量不变。两者都实现零停机。"},
    {"id": "q9", "domain": 3, "question": "需要在AWS Outposts上实现与云端一致的CI/CD管道。如何设计？", "options": {"A": "使用本地Jenkins", "B": "使用CodePipeline结合在Outposts上的CodeBuild和CodeDeploy代理", "C": "手动部署", "D": "使用S3同步"}, "answer": "B", "explanation": "CodeBuild和CodeDeploy代理可以在Outposts上运行，CodePipeline编排整个流程，实现云边一致的CI/CD体验。"},
    {"id": "q10", "domain": 4, "question": "需要监控ECS服务的容器级别指标（如内存使用率）。如何实现？", "options": {"A": "只能监控实例指标", "B": "使用Container Insights", "C": "使用VPC Flow Logs", "D": "使用CloudTrail"}, "answer": "B", "explanation": "CloudWatch Container Insights为ECS提供容器级别的指标收集，包括CPU、内存、网络等，支持任务和服务级别的监控。"},
    {"id": "q11", "domain": 4, "question": "需要分析CloudWatch Logs中的错误模式并生成报告。最有效的方法是？", "options": {"A": "手动搜索日志", "B": "使用CloudWatch Logs Insights查询语言", "C": "导出到Excel", "D": "使用grep"}, "answer": "B", "explanation": "Logs Insights提供专用查询语言，支持过滤、聚合、统计和可视化，可以高效分析大量日志数据。"},
    {"id": "q12", "domain": 4, "question": "需要在指标异常时自动调整应用程序行为。如何实现？", "options": {"A": "手动响应告警", "B": "CloudWatch告警触发SNS，SNS触发Lambda调整配置", "C": "使用Auto Scaling", "D": "增加实例大小"}, "answer": "B", "explanation": "CloudWatch告警可以触发SNS，SNS触发Lambda函数执行自定义响应逻辑，如调整应用配置、发送通知等。"},
    {"id": "q13", "domain": 5, "question": "EC2实例系统状态检查失败。AWS建议的恢复步骤是？", "options": {"A": "SSH修复", "B": "使用EC2自动恢复或手动停止/启动实例（迁移到新硬件）", "C": "重启实例", "D": "终止实例"}, "answer": "B", "explanation": "系统状态检查失败通常是底层硬件问题。停止/启动会将实例迁移到新硬件。EC2自动恢复可以自动化这个过程。"},
    {"id": "q14", "domain": 5, "question": "需要在检测到DDoS攻击时自动启动缓解措施。如何配置？", "options": {"A": "手动响应", "B": "AWS Shield Advanced + WAF自动缓解", "C": "增加实例", "D": "使用NACL阻止IP"}, "answer": "B", "explanation": "Shield Advanced提供DDoS检测和响应团队支持，可以与WAF集成自动应用规则缓解攻击。"},
    {"id": "q15", "domain": 5, "question": "CloudFormation栈更新导致生产中断。如何最小化未来的风险？", "options": {"A": "避免更新", "B": "使用Change Sets预览变更，配置栈策略保护关键资源", "C": "直接回滚", "D": "使用新栈"}, "answer": "B", "explanation": "Change Sets显示更新将产生的变更，允许在执行前审查。栈策略可以防止关键资源被意外修改或删除。"},
    {"id": "q16", "domain": 6, "question": "需要确保EC2实例只能使用特定安全组。如何通过策略强制执行？", "options": {"A": "使用NACL", "B": "使用SCP或IAM策略限制RunInstances操作的安全组", "C": "使用AWS Config", "D": "使用VPC Endpoint"}, "answer": "B", "explanation": "IAM策略可以使用Condition限制RunInstances操作必须使用特定的安全组，SCP可以在组织级别强制执行。"},
    {"id": "q17", "domain": 6, "question": "需要审计所有IAM策略变更。如何配置？", "options": {"A": "定期检查IAM", "B": "启用CloudTrail并监控IAM管理事件", "C": "使用VPC Flow Logs", "D": "使用AWS Config"}, "answer": "B", "explanation": "CloudTrail默认记录IAM管理事件，可以追踪所有策略创建、修改和删除操作，用于合规审计。"},
    {"id": "q18", "domain": 6, "question": "需要确保跨账户访问遵循最小权限原则。如何设计？", "options": {"A": "共享IAM用户凭证", "B": "使用IAM角色和STS AssumeRole，限制角色权限", "C": "使用根账户", "D": "完全开放访问"}, "answer": "B", "explanation": "跨账户角色信任关系明确指定允许的主体，角色权限策略限制可执行的操作，实现最小权限跨账户访问。"},
    {"id": "q19", "domain": 1, "question": "需要在代码仓库中检测敏感信息（如API密钥）。AWS原生方案是？", "options": {"A": "手动代码审查", "B": "使用CodeGuru Reviewer或第三方扫描工具", "C": "使用CloudWatch", "D": "使用AWS Config"}, "answer": "B", "explanation": "CodeGuru Reviewer可以自动扫描代码中的安全问题和最佳实践违规，包括检测硬编码的凭证。"},
    {"id": "q20", "domain": 1, "question": "需要在Lambda函数部署前运行集成测试。如何在CodePipeline中实现？", "options": {"A": "部署后手动测试", "B": "添加CodeBuild阶段在部署前运行测试", "C": "使用Lambda层", "D": "使用CloudWatch Events"}, "answer": "B", "explanation": "在部署操作前添加CodeBuild测试阶段，运行集成测试脚本，测试通过后才继续部署。"},
    {"id": "q21", "domain": 2, "question": "CloudFormation嵌套栈与StackSets的使用场景区别？", "options": {"A": "功能相同", "B": "嵌套栈用于模块化单个部署，StackSets用于跨账户/区域部署", "C": "StackSets性能更好", "D": "嵌套栈更便宜"}, "answer": "B", "explanation": "嵌套栈用于将复杂模板分解为可复用模块在单个账户部署。StackSets用于将同一模板部署到多个账户和区域。"},
    {"id": "q22", "domain": 2, "question": "需要在CloudFormation模板中创建自定义资源（AWS不原生支持）。如何实现？", "options": {"A": "不可能", "B": "使用AWS::CloudFormation::CustomResource调用Lambda", "C": "使用CLI脚本", "D": "手动创建"}, "answer": "B", "explanation": "Custom Resource可以调用Lambda函数在栈操作期间执行自定义逻辑，如创建AWS不原生支持的资源或执行复杂初始化。"},
    {"id": "q23", "domain": 3, "question": "需要实现RDS的自动故障转移。如何配置？", "options": {"A": "使用只读副本", "B": "配置Multi-AZ部署", "C": "使用Route 53健康检查", "D": "使用Lambda监控"}, "answer": "B", "explanation": "RDS Multi-AZ在另一个AZ维护同步备用副本，主实例故障时自动故障转移到备用，对应用程序透明。"},
    {"id": "q24", "domain": 3, "question": "需要确保ECS Fargate任务在容器失败时自动重启。如何配置？", "options": {"A": "手动重启任务", "B": "使用ECS服务并配置最小健康百分比", "C": "使用CloudWatch Events", "D": "使用Lambda监控"}, "answer": "B", "explanation": "ECS服务会自动维护期望的任务数量，任务失败时自动启动新任务替换，实现自愈。"},
    {"id": "q25", "domain": 4, "question": "需要接收CloudWatch告警但不想被过多告警淹没。如何优化？", "options": {"A": "减少监控", "B": "使用复合告警合并相关告警", "C": "增加告警阈值", "D": "禁用告警"}, "answer": "B", "explanation": "复合告警可以组合多个告警状态，只在满足特定条件（如多个服务同时告警）时才触发通知，减少告警疲劳。"},
    {"id": "q26", "domain": 4, "question": "需要分析过去的CloudWatch指标趋势预测未来需求。使用什么功能？", "options": {"A": "CloudWatch Dashboards", "B": "CloudWatch Anomaly Detection", "C": "CloudWatch Insights", "D": "手动分析"}, "answer": "B", "explanation": "CloudWatch Anomaly Detection使用机器学习分析历史数据，创建基线并检测异常，帮助理解和预测指标行为。"},
    {"id": "q27", "domain": 5, "question": "Lambda函数突然开始超时。如何诊断？", "options": {"A": "增加超时时间", "B": "查看CloudWatch Logs和X-Ray追踪分析执行时间", "C": "重新部署函数", "D": "增加内存"}, "answer": "B", "explanation": "CloudWatch Logs显示函数日志，X-Ray追踪显示各阶段耗时，可以定位是代码问题还是外部依赖延迟导致超时。"},
    {"id": "q28", "domain": 5, "question": "需要自动恢复意外终止的EC2 Spot实例上的工作。如何设计？", "options": {"A": "不使用Spot实例", "B": "使用Spot中断通知保存状态，配合SQS/Lambda恢复", "C": "使用On-Demand实例", "D": "增加Spot价格"}, "answer": "B", "explanation": "EC2提供2分钟Spot中断通知，应用程序可以监控通知保存工作状态，使用SQS队列和新实例恢复未完成的工作。"},
    {"id": "q29", "domain": 6, "question": "需要确保传输到S3的数据使用TLS加密。如何强制执行？", "options": {"A": "使用VPC Endpoint", "B": "配置存储桶策略要求SecureTransport", "C": "使用客户端加密", "D": "使用CloudFront"}, "answer": "B", "explanation": "存储桶策略可以包含条件aws:SecureTransport为true，拒绝非TLS请求，强制所有传输使用HTTPS。"},
    {"id": "q30", "domain": 6, "question": "需要在VPC中限制Lambda函数只能访问特定资源。如何配置？", "options": {"A": "使用IAM策略", "B": "配置Lambda VPC并使用安全组限制出站流量", "C": "使用NACL", "D": "使用WAF"}, "answer": "B", "explanation": "Lambda配置VPC后，使用安全组控制出站流量，只允许访问特定IP/端口，限制函数的网络访问范围。"},
    {"id": "q31", "domain": 1, "question": "需要在CodeBuild中使用自定义Docker镜像。如何配置？", "options": {"A": "只能使用AWS托管镜像", "B": "在项目配置中指定ECR中的自定义镜像", "C": "在buildspec中指定", "D": "使用Docker Hub公共镜像"}, "answer": "B", "explanation": "CodeBuild支持使用ECR中的自定义Docker镜像作为构建环境，可以预装所需工具和依赖。"},
    {"id": "q32", "domain": 2, "question": "CloudFormation栈删除时需要保留某些资源（如S3存储桶）。如何配置？", "options": {"A": "手动删除其他资源", "B": "设置资源的DeletionPolicy为Retain", "C": "使用UpdateReplacePolicy", "D": "使用栈策略"}, "answer": "B", "explanation": "DeletionPolicy: Retain确保栈删除时保留该资源，常用于需要保留数据的存储资源如S3、RDS快照等。"},
    {"id": "q33", "domain": 3, "question": "需要在ALB后面的EC2实例滚动更新时保持连接不中断。如何配置？", "options": {"A": "立即切换所有流量", "B": "使用连接排空(Connection Draining)和Target Group缓慢移除", "C": "使用DNS切换", "D": "使用CloudFront"}, "answer": "B", "explanation": "Target Group的Deregistration Delay允许现有连接完成，新请求路由到健康实例，实现平滑的滚动更新。"},
    {"id": "q34", "domain": 4, "question": "需要监控API Gateway的请求延迟和错误率。如何实现？", "options": {"A": "查看访问日志", "B": "使用CloudWatch指标Latency和5XXError", "C": "使用VPC Flow Logs", "D": "使用CloudTrail"}, "answer": "B", "explanation": "API Gateway自动发送指标到CloudWatch，包括Latency、Count、4XXError、5XXError等，可以创建仪表板和告警监控。"},
    {"id": "q35", "domain": 5, "question": "需要在多个AWS服务间协调复杂的自动化工作流。最佳服务是？", "options": {"A": "Lambda函数链", "B": "AWS Step Functions", "C": "EventBridge规则", "D": "SNS/SQS"}, "answer": "B", "explanation": "Step Functions提供可视化的工作流编排，支持错误处理、重试、并行执行和状态管理，适合复杂的多服务工作流。"},
    {"id": "q36", "domain": 6, "question": "需要确保所有资源都有适当的标签用于成本分配。如何强制执行？", "options": {"A": "手动检查", "B": "使用AWS Config规则和SCP强制执行标签策略", "C": "使用预算告警", "D": "使用Cost Explorer"}, "answer": "B", "explanation": "SCP可以要求创建资源时必须包含特定标签，AWS Config可以检测不合规的资源，实现标签治理。"},
    {"id": "q37", "domain": 1, "question": "需要实现金丝雀部署逐步验证新版本。AWS Lambda如何实现？", "options": {"A": "使用多个函数", "B": "使用Lambda别名和权重路由", "C": "使用API Gateway分流", "D": "手动切换"}, "answer": "B", "explanation": "Lambda别名支持权重路由，可以将10%流量路由到新版本，90%到稳定版本，逐步增加验证后完全切换。"},
    {"id": "q38", "domain": 2, "question": "需要检测CloudFormation模板中的安全问题（如过于宽松的安全组）。使用什么工具？", "options": {"A": "手动审查", "B": "使用cfn-lint或cfn-nag进行静态分析", "C": "部署后检查", "D": "使用AWS Config"}, "answer": "B", "explanation": "cfn-lint检查模板语法和最佳实践，cfn-nag专门检查安全问题，应在CI/CD管道中集成这些工具。"},
    {"id": "q39", "domain": 3, "question": "需要确保应用程序可以承受AZ故障且RTO小于5分钟。如何设计？", "options": {"A": "单AZ部署加备份", "B": "跨AZ的ASG配合Multi-AZ RDS和自动健康检查", "C": "手动故障转移", "D": "使用更大实例"}, "answer": "B", "explanation": "跨AZ ASG在AZ故障时自动在其他AZ启动实例，Multi-AZ RDS自动故障转移，ELB健康检查确保流量只到健康实例。"},
    {"id": "q40", "domain": 5, "question": "需要在CloudWatch告警触发时执行复杂的修复工作流。如何实现？", "options": {"A": "手动响应", "B": "CloudWatch告警→EventBridge→Step Functions工作流", "C": "增加告警阈值", "D": "使用Auto Scaling"}, "answer": "B", "explanation": "EventBridge可以接收CloudWatch告警状态变化，触发Step Functions执行复杂的多步骤修复工作流，包括诊断、修复和通知。"}
  ]
}
